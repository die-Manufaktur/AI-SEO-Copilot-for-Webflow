@import "tailwindcss";

/* Box model reset for responsive design */
*, *::before, *::after {
  box-sizing: border-box;
}

/* Prevent horizontal overflow */
html, body {
  overflow-x: hidden;
  margin: 0;
  padding: 0;
}

/* Responsive text utilities */
.text-responsive {
  word-wrap: break-word;
  overflow-wrap: break-word;
  max-width: 100%;
}

/* Responsive heading */
.heading-responsive {
  font-size: clamp(1.25rem, 3vw, 1.75rem);
  max-width: 100%;
}

/* Container utilities */
.container-responsive {
  max-width: min(90%, 600px);
  margin: 0 auto;
  padding: 1rem;
  box-sizing: border-box;
}

/* Full width utilities for form elements */
.form-element-responsive {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

@layer base {
  :root {
    /* === FIGMA DESIGN SYSTEM - CANONICAL VALUES === */

    /* Font Family */
    --font-family-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;

    /* Primary/Accent Colors */
    --color-accent-blue: #1A72F5;
    --color-red: #FF4343;
    --color-green: #A2FFB4;
    --color-yellow: #FFD064;
    --color-light-red: #FF8484;
    --color-light-yellow: #FFEABE;

    /* Background Colors (Dark Theme) */
    --color-bg-900: #1A1A1A;  /* Darkest - main background */
    --color-bg-700: #323232;  /* Section backgrounds */
    --color-bg-500: #444444;  /* Input backgrounds */
    --color-bg-300: #787878;  /* Lightest - disabled states */
    --color-black: #000000;

    /* Text Colors */
    --color-text-primary: #FFFFFF;
    --color-text-secondary: #C7C7C7;

    /* Border Colors */
    --color-border: #404040;
    --color-border-subtle: #333333;

    /* Semantic Colors (from design-system.test.ts) */
    --color-success: #4CAF50;
    --color-warning: #FFA726;
    --color-error: #FF5252;

    /* Score Colors */
    --color-score-coral: #FF9B9B;
    --color-score-coral-dark: #FF8080;

    /* Hover States */
    --color-primary-blue-hover: #2563EB;

    /* Typography Scale - Format: [Weight]/[Size]/[Line Height] */

    /* H1 - Medium/28/110% */
    --font-h1-size: 28px;
    --font-h1-weight: 500;
    --font-h1-line-height: 1.1;
    --font-h1-letter-spacing: 0;

    /* H2 - Semi Bold/20/120% */
    --font-h2-size: 20px;
    --font-h2-weight: 600;
    --font-h2-line-height: 1.2;
    --font-h2-letter-spacing: 0;

    /* H3 - (if needed, derive from pattern) */
    --font-h3-size: 16px;
    --font-h3-weight: 600;
    --font-h3-line-height: 1.2;
    --font-h3-letter-spacing: 0;

    /* Body 18 - Semibold & Regular / 18 / 130% */
    --font-body-18-size: 18px;
    --font-body-18-weight: 400;
    --font-body-18-semibold-weight: 600;
    --font-body-18-line-height: 1.3;
    --font-body-18-letter-spacing: 0;

    /* Body 16 - Regular / 16 / 130% */
    --font-body-16-size: 16px;
    --font-body-16-weight: 400;
    --font-body-16-line-height: 1.3;
    --font-body-16-letter-spacing: 0;

    /* Body 12 - Regular / 12 / 130% */
    --font-body-12-size: 12px;
    --font-body-12-weight: 400;
    --font-body-12-line-height: 1.3;
    --font-body-12-letter-spacing: 0;

    /* Button - Medium & Regular / 16 / 20px */
    --font-button-size: 16px;
    --font-button-weight: 500;
    --font-button-regular-weight: 400;
    --font-button-line-height: 20px;
    --font-button-letter-spacing: -0.6px;

    /* Font Weights */
    --font-weight-regular: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;

    /* Line Heights */
    --line-height-tight: 1.1;
    --line-height-normal: 1.3;
    --line-height-relaxed: 1.4;

    /* Legacy Mappings for Compatibility */
    --background: var(--color-bg-900);
    --card-bg: var(--color-bg-700);
    --input-bg: var(--color-bg-500);
    --section-bg: var(--color-bg-700);
    --footer-bg: #252525;

    --background1: var(--background);
    --background2: var(--card-bg);
    --background3: var(--input-bg);
    --background4: var(--color-bg-300);
    --background5: var(--input-bg);

    --text-primary: var(--color-text-primary);
    --text-secondary: var(--color-text-secondary);
    --text-muted: #808080;
    --text-disabled: #5A5A5A;

    --foreground: var(--text-primary);
    --text1: var(--text-primary);
    --text2: var(--text-secondary);
    --text3: var(--text-muted);

    --primary-blue: var(--color-accent-blue);
    --primary-blue-hover: var(--color-primary-blue-hover);
    --score-coral: var(--color-score-coral);
    --score-coral-dark: var(--color-score-coral-dark);

    --primary: var(--primary-blue);
    --primaryHover: var(--primary-blue-hover);
    --primaryActive: #1052c2;
    --greenText: var(--color-green);
    --greenTextLight: #83f098;
    --greenTextBright: var(--color-green);
    --greenTextPale: #bdffca;
    --redText: var(--color-red);
    --redTextDark: var(--color-red);
    --yellowText: var(--color-yellow);
    --yellowTextLight: var(--color-light-yellow);
    --blueText: var(--primary-blue);

    --border-color: var(--color-border);
    --border-subtle: var(--color-border-subtle);
    --border: var(--border-color);

    /* Legacy typography mappings */
    --font-size-xs: var(--font-body-12-size);
    --font-size-sm: 14px;
    --font-size-md: var(--font-body-16-size);
    --font-size-lg: var(--font-h2-size);
    --font-size-xl: 24px;
    --font-size-2xl: var(--font-h1-size);
    --font-size-score: 52px;

    /* Legacy typography mappings */
    --font-title: var(--font-size-2xl);
    --font-category: var(--font-size-lg);
    --font-body: var(--font-size-md);
    --font-small: var(--font-size-sm);
    --font-caption: var(--font-size-xs);
    --font-score: var(--font-size-score);

    /* === COMPACT DESIGN MODE === */
    /* Reduces total height by ~29% to fit in 720px iframe */

    /* Compact Spacing Scale */
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 12px;
    --spacing-lg: 16px;
    --spacing-xl: 20px;
    --spacing-2xl: 24px;
    --spacing-3xl: 32px;

    /* Compact-specific spacing */
    --spacing-compact-xs: 4px;
    --spacing-compact-sm: 6px;
    --spacing-compact-md: 8px;
    --spacing-compact-lg: 12px;
    --spacing-compact-xl: 14px;
    --spacing-compact-2xl: 16px;
    --spacing-compact-3xl: 20px;

    /* Compact Typography Sizes */
    --font-size-compact-xs: 11px;
    --font-size-compact-sm: 12px;
    --font-size-compact-base: 13px;
    --font-size-compact-lg: 14px;
    --font-size-compact-xl: 16px;
    --font-size-compact-2xl: 18px;

    /* Compact Component Heights */
    --input-height-compact: 36px;
    --button-height-compact: 40px;
    --footer-height-compact: 36px;
    --textarea-height-compact: 56px;

    /* Compact Padding */
    --padding-compact-container: 16px;
    --padding-compact-input: 10px;
    --padding-compact-button-y: 12px;
    --padding-compact-button-x: 14px;
    --padding-compact-footer-y: 8px;
    --padding-compact-footer-x: 16px;

    /* Compact Border Radii */
    --radius-compact-container: 14px;
    --radius-compact-input: 8px;
    --radius-compact-button: 20px;
    --radius-compact-footer: 10px;

    /* Border Radius from Figma */
    --radius-sm: 4px;
    --radius-md: 6px;
    --radius-lg: 8px;
    --radius-xl: 10px;  /* From design system */
    --radius-2xl: 12px;
    --radius-full: 9999px;
    --radius-optimize: 1.6875rem;  /* 27px - Optimize button specific */

    /* Legacy radius mappings */
    --radius-container: 14px;
    --radius-card: 20px;  /* Updated from Figma spec for main card */
    --radius-footer: 14px;  /* Footer specific radius */
    --radius-button: var(--radius-xl);
    --radius-input: var(--radius-lg);
    --radius-badge: 41px;

    /* Component Sizes from Figma */
    --size-button-height: 54px;  /* Main button height */
    --size-button-small-height: 36px;  /* Small button height */
    --size-button-icon-only: 32px;  /* Icon-only button size */
    --size-input-height: 51px;  /* Input field height */
    --size-footer-height: 48px;  /* Footer height */

    /* Icon Sizes from Figma */
    --size-icon-xs: 16px;
    --size-icon-sm: 20px;
    --size-icon-md: 24px;
    --size-icon-lg: 25px;

    /* Shadows from Figma */
    --shadow-xs: 0 1px 2px 0 rgba(10, 13, 20, 0.031);  /* x-small regular shadow */
    --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    --shadow-button: 0px 4px 12px 0px rgba(26, 114, 245, 0.25);
    --shadow-button-hover: 0px 6px 20px 0px rgba(26, 114, 245, 0.35);
    --shadow-optimize: 0 2px 6.6px 0 rgba(26, 114, 245, 0.30);  /* Optimize button specific - matches Figma */

    /* Legacy Component Dimensions (mapped to new values) */
    --button-height-sm: var(--size-button-small-height);
    --button-height-md: 44px;
    --button-height-lg: var(--size-button-height);

    --input-height: var(--size-input-height);
    --input-height-sm: var(--size-button-small-height);
    --input-height-lg: var(--size-input-height);

    --extension-width: 540px;
    --extension-height: 720px;
    --progress-circle-size: 160px;

    /* Score color tokens from Figma */
    --score-high: var(--color-green);
    --score-good: var(--primary-blue);
    --score-fair: var(--color-yellow);
    --score-low: var(--score-coral);
    --score-track: rgba(255, 255, 255, 0.08);

    /* Badge/Pill tokens from Figma - Updated to solid colors */
    --badge-pass-bg: #22C55E;
    --badge-pass-border: #16A34A;
    --badge-pass-text: #FFFFFF;
    --badge-improve-bg: #FFD064;
    --badge-improve-border: #F59E0B;
    --badge-improve-text: #000000;

    /* Icon background tokens from Figma - Updated to solid colors */
    --icon-pass-bg: #22C55E;
    --icon-pass-glyph: #FFFFFF;
    --icon-improve-bg: #FFD064;
    --icon-improve-glyph: #000000;
    --icon-fail-bg: #EF4444;
    --icon-fail-glyph: #FFFFFF;
  }

  /* Reset visibility and display properties */
  html, body, #root, #webflow-app-wrapper {
    width: 100%;
    min-height: 100vh;
    display: block !important;
    visibility: visible !important;
    overflow: auto;
    margin: 0;
    padding: 0;
  }
  
  /* Force all text to be visible */
  * {
    border-color: var(--border);
    color: var(--text1);
  }
  
  /* Ensure SVGs inherit colors properly */
  svg {
    color: inherit;
    stroke: currentColor;
    fill: none;
  }

  /* Specific fix for Lucide icons */
  svg.lucide {
    stroke: currentColor;
    color: inherit;
    fill: none;
  }

  /* Override classes to ensure coloring works */
  .text-greenText svg {
    stroke: var(--greenText) !important;
    color: var(--greenText) !important;
  }

  .text-redText svg {
    stroke: var(--redText) !important;
    color: var(--redText) !important;
  }

  .text-yellowText svg {
    stroke: var(--yellowText) !important;
    color: var(--yellowText) !important;
  }

  .text-blueText svg {
    stroke: var(--blueText) !important;
    color: var(--blueText) !important;
  }
}

/* Custom CSS */
body {
  margin: 0;
  font-family: var(--font-family-primary);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  color: var(--text-primary);
  background-color: var(--background);
  overflow-x: hidden;
  overflow-y: auto;
  min-height: 100vh;
  padding: 0;
}

p, span {
  color: var(--text2);
}

/* === FIGMA DESIGN SYSTEM UTILITIES === */

/* Typography Utility Classes */
.text-h1 {
  font-family: var(--font-family-primary);
  font-size: var(--font-h1-size);
  font-weight: var(--font-h1-weight);
  line-height: var(--font-h1-line-height);
  letter-spacing: var(--font-h1-letter-spacing);
}

.text-h2 {
  font-family: var(--font-family-primary);
  font-size: var(--font-h2-size);
  font-weight: var(--font-h2-weight);
  line-height: var(--font-h2-line-height);
  letter-spacing: var(--font-h2-letter-spacing);
}

.text-h3 {
  font-family: var(--font-family-primary);
  font-size: var(--font-h3-size);
  font-weight: var(--font-h3-weight);
  line-height: var(--font-h3-line-height);
  letter-spacing: var(--font-h3-letter-spacing);
}

.text-body-18 {
  font-family: var(--font-family-primary);
  font-size: var(--font-body-18-size);
  font-weight: var(--font-body-18-weight);
  line-height: var(--font-body-18-line-height);
  letter-spacing: var(--font-body-18-letter-spacing);
}

.text-body-18-semibold {
  font-family: var(--font-family-primary);
  font-size: var(--font-body-18-size);
  font-weight: var(--font-body-18-semibold-weight);
  line-height: var(--font-body-18-line-height);
  letter-spacing: var(--font-body-18-letter-spacing);
}

.text-body-16 {
  font-family: var(--font-family-primary);
  font-size: var(--font-body-16-size);
  font-weight: var(--font-body-16-weight);
  line-height: var(--font-body-16-line-height);
  letter-spacing: var(--font-body-16-letter-spacing);
}

.text-body-12 {
  font-family: var(--font-family-primary);
  font-size: var(--font-body-12-size);
  font-weight: var(--font-body-12-weight);
  line-height: var(--font-body-12-line-height);
  letter-spacing: var(--font-body-12-letter-spacing);
}

.text-button {
  font-family: var(--font-family-primary);
  font-size: var(--font-button-size);
  font-weight: var(--font-button-weight);
  line-height: var(--font-button-line-height);
  letter-spacing: var(--font-button-letter-spacing);
}

.text-button-regular {
  font-family: var(--font-family-primary);
  font-size: var(--font-button-size);
  font-weight: var(--font-button-regular-weight);
  line-height: var(--font-button-line-height);
  letter-spacing: var(--font-button-letter-spacing);
}

/* Background utilities */
.bg-background {
  background-color: var(--background);
}

.bg-card-bg {
  background-color: var(--card-bg);
}

.bg-input-bg {
  background-color: var(--input-bg);
}

.bg-section-bg {
  background-color: var(--section-bg);
}

.bg-footer-bg {
  background-color: var(--footer-bg);
}

/* Legacy background mappings */
.bg-background2 {
  background-color: var(--background2);
}

.bg-background3 {
  background-color: var(--background3);
}

.bg-background4 {
  background-color: var(--background4);
}

.bg-background5 {
  background-color: var(--background5);
}

/* Text color utilities */
.text-primary {
  color: var(--text-primary);
}

.text-secondary {
  color: var(--text-secondary);
}

.text-muted {
  color: var(--text-muted);
}

.text-disabled {
  color: var(--text-disabled);
}

/* Accent color utilities */
.text-primary-blue {
  color: var(--primary-blue);
}

.text-score-coral {
  color: var(--score-coral);
}

.text-score-coral-dark {
  color: var(--score-coral-dark);
}

.bg-primary-blue {
  background-color: var(--primary-blue);
}

.bg-primary-blue-hover {
  background-color: var(--primary-blue-hover);
}

/* Border utilities */
.border-color {
  border-color: var(--border-color);
}

.border-subtle {
  border-color: var(--border-subtle);
}

.border-divider {
  border-color: var(--border-color);
}

/* Force visibility for critical containers */
.card {
  display: block !important;
  visibility: visible !important;
  background-color: var(--background2);
  color: var(--text1);
  padding: 1rem;
  border-radius: var(--radius-card);
  margin-bottom: 1rem;
}

.text-break {
  word-break: break-word;
}

/* Custom focus states */
input[name="keyphrase"]:focus {
  outline-color: var(--text3) !important;
  outline-style: solid !important;
  outline-width: 2px !important;
  outline-offset: 1px !important;
  box-shadow: none !important;
}

input[name="keyphrase"]:focus-visible {
  outline: none !important;
  box-shadow: 0 0 0 2px var(--background1), 0 0 0 2px var(--text3) !important;
  border-color: var(--text3) !important;
}

/* Direct Tailwind CSS variable override */
input[name="keyphrase"] {
--tw-ring-color: var(--text-muted) !important;
--tw-ring-offset-color: var(--background) !important;
}

/* Custom focus states for additional context textarea */
textarea:focus {
  outline-color: var(--text3) !important;
  outline-style: solid !important;
  outline-width: 2px !important;
  outline-offset: 1px !important;
  box-shadow: none !important;
}

textarea:focus-visible {
  outline: none !important;
  box-shadow: 0 0 0 2px var(--background1), 0 0 0 2px var(--text3) !important;
  border-color: var(--text3) !important;
}

/* Direct Tailwind CSS variable override for textarea */
textarea {
  --tw-ring-color: var(--text-muted) !important;
  --tw-ring-offset-color: var(--background) !important;
}

.scrollarea-fix [data-radix-scroll-area-viewport] > div {
  display: block !important;
  min-width: auto !important;
}

/* Fix for copy button tooltips */
.copy-button-tooltip {
  transform: translateX(-54px) !important;
}

/* Animation classes for onboarding */
@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fade-in 0.5s ease-out;
}

.animation-delay-200 {
  animation-delay: 0.2s;
}

.animation-delay-400 {
  animation-delay: 0.4s;
}

/* === NEW DESIGN SYSTEM UTILITIES FOR BUTTON COMPONENT === */

/* Gradient Utilities */
.from-primary-blue {
  --tw-gradient-from: var(--primary-blue) var(--tw-gradient-from-position);
  --tw-gradient-to: rgb(59 130 246 / 0) var(--tw-gradient-to-position);
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
}
.to-primary-blue-hover {
  --tw-gradient-to: var(--primary-blue-hover) var(--tw-gradient-to-position);
}

/* Text Utilities */
.text-text-primary {
  color: var(--text-primary);
}
.text-text-secondary {
  color: var(--text-secondary);
}
.text-text-muted {
  color: var(--text-muted);
}

/* Height Utilities */
.h-button-height-sm {
  height: var(--button-height-sm);
}
.h-button-height-md {
  height: var(--button-height-md);
}
.h-button-height-lg {
  height: var(--button-height-lg);
}

/* Border Radius Utilities */
.rounded-radius-sm {
  border-radius: var(--radius-sm);
}
.rounded-radius-md {
  border-radius: var(--radius-md);
}
.rounded-radius-lg {
  border-radius: var(--radius-lg);
}
.rounded-radius-xl {
  border-radius: var(--radius-xl);
}
.rounded-radius-optimize {
  border-radius: var(--radius-optimize);
}

/* Shadow Utilities */
.shadow-button {
  box-shadow: var(--shadow-button);
}
.hover\:shadow-button-hover:hover {
  box-shadow: var(--shadow-button-hover);
}
.shadow-optimize {
  box-shadow: var(--shadow-optimize);
}

/* Typography Utilities */
.text-font-size-xs {
  font-size: var(--font-size-xs);
}
.text-font-size-sm {
  font-size: var(--font-size-sm);
}
.text-font-size-md {
  font-size: var(--font-size-md);
}
.text-font-size-lg {
  font-size: var(--font-size-lg);
}
.text-font-size-xl {
  font-size: var(--font-size-xl);
}
.text-font-size-2xl {
  font-size: var(--font-size-2xl);
}
.text-font-size-score {
  font-size: var(--font-size-score);
}

/* Font Weight Utilities */
.font-font-weight-regular {
  font-weight: var(--font-weight-regular);
}
.font-font-weight-medium {
  font-weight: var(--font-weight-medium);
}
.font-font-weight-semibold {
  font-weight: var(--font-weight-semibold);
}
.font-font-weight-bold {
  font-weight: var(--font-weight-bold);
}

/* Line Height Utilities */
.leading-line-height-tight {
  line-height: var(--line-height-tight);
}
.leading-line-height-normal {
  line-height: var(--line-height-normal);
}
.leading-line-height-relaxed {
  line-height: var(--line-height-relaxed);
}

/* Border Utilities */
.border-border-color {
  border-color: var(--border-color);
}
.border-border-subtle {
  border-color: var(--border-subtle);
}