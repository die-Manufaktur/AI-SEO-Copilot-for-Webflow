
> ai-seo-copilot@4.6.3 test C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow
> vitest run --coverage "--" "--run" "--reporter=json"


[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/Paul Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow[39m
      [2mCoverage enabled with [22m[33mv8[39m

[90mstdout[2m | client/src/lib/webflowDesignerApiDetection.test.ts[2m > [22m[2mWebflow Designer API Detection[2m > [22m[2mdetectWebflowDesignerCapabilities[2m > [22m[2mshould detect no capabilities when webflow object is missing
[22m[39m[WebflowDesignerDetection] No window.webflow object found

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould find HeadingElement when looking for h1 tags
[22m[39m[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getAllElements: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  setSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  elementBuilder: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Available webflow methods: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getAllElements': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'setSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'elementBuilder': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mtrue[39m,
  canSelectElements: [33mtrue[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [
    [32m'getCurrentPage'[39m,
    [32m'getAllElements'[39m,
    [32m'getSelectedElement'[39m,
    [32m'setSelectedElement'[39m,
    [32m'elementBuilder'[39m
  ]
}

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould apply page title recommendation
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowDesignerApiDetection.test.ts[2m > [22m[2mWebflow Designer API Detection[2m > [22m[2mdetectWebflowDesignerCapabilities[2m > [22m[2mshould detect read capabilities when getCurrentPage is available
[22m[39m[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould find HeadingElement when looking for h1 tags
[22m[39m[WebflowDesignerAPI] Waiting for API to be ready...

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould apply page title recommendation
[22m[39m[WebflowInsertion] Applying request: {
  type: [32m'page_title'[39m,
  pageId: [32m'page_123'[39m,
  value: [32m'New Optimized Title'[39m
}

[90mstdout[2m | client/src/lib/webflowDesignerApiDetection.test.ts[2m > [22m[2mWebflow Designer API Detection[2m > [22m[2mdetectWebflowDesignerCapabilities[2m > [22m[2mshould detect update capabilities when setPageSetting is available
[22m[39m[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  setPageSetting: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'setPageSetting'[39m, [32m'getCurrentPage'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'setPageSetting'[39m, [32m'getCurrentPage'[39m ]
[WebflowDesignerDetection] Method 'setPageSetting': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould find HeadingElement when looking for h1 tags
[22m[39m[WebflowDesignerDetection] Designer API is ready

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould apply page title recommendation
[22m[39m[WebflowInsertion] Using Data API to update page title

[90mstdout[2m | client/src/lib/webflowDesignerApiDetection.test.ts[2m > [22m[2mWebflow Designer API Detection[2m > [22m[2mdetectWebflowDesignerCapabilities[2m > [22m[2mshould detect custom code capabilities when addCustomCode is available
[22m[39m[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  addCustomCode: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'addCustomCode'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'addCustomCode'[39m ]
[WebflowDesignerDetection] Method 'addCustomCode': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould find HeadingElement when looking for h1 tags
[22m[39m[WebflowDesignerAPI] API is ready

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould apply page title recommendation
[22m[39m[WebflowInsertion] Apply result: {
  success: [33mtrue[39m,
  data: {
    _id: [32m'page_123'[39m,
    title: [32m'New Optimized Title'[39m,
    lastUpdated: [32m'2025-10-19T22:36:15.189Z'[39m
  }
}

[90mstdout[2m | client/src/lib/webflowDesignerApiDetection.test.ts[2m > [22m[2mWebflow Designer API Detection[2m > [22m[2mtestWebflowDesignerConnection[2m > [22m[2mshould fallback to getPage if getCurrentPage fails
[22m[39m[WebflowDesignerDetection] getCurrentPage failed: Error: Not available
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowDesignerApiDetection.test.ts:102:53
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould find HeadingElement when looking for h1 tags
[22m[39m[WebflowDesignerAPI] getAllElements returned: { count: [33m5[39m, type: [32m'object'[39m, isArray: [33mtrue[39m }
[WebflowDesignerAPI] Sample elements structure:
[WebflowDesignerAPI] Element 0: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-1'[39m,
  webflowType: [90mundefined[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Some content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 1: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-2'[39m,
  webflowType: [32m'HeadingElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Real H1 Content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [
    [32m'id'[39m,
    [32m'type'[39m,
    [32m'textContent'[39m,
    [32m'setTextContent'[39m,
    [32m'getTextContent'[39m,
    [32m'getText'[39m,
    [32m'getHeadingLevel'[39m
  ]
}
[WebflowDesignerAPI] Element 2: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-3'[39m,
  webflowType: [1mnull[22m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Null type content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'type'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 3: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-4'[39m,
  webflowType: [32m'ParagraphElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'This is a substantial paragraph with more than 50 characters to be considered for introduction'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'type'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 4: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-5'[39m,
  webflowType: [32m'HeadingElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'H2 Content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [
    [32m'id'[39m,
    [32m'type'[39m,
    [32m'textContent'[39m,
    [32m'setTextContent'[39m,
    [32m'getTextContent'[39m,
    [32m'getText'[39m,
    [32m'getHeadingLevel'[39m
  ]
}

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould apply meta description recommendation
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowDesignerApiDetection.test.ts[2m > [22m[2mWebflow Designer API Detection[2m > [22m[2mwaitForWebflowDesigner[2m > [22m[2mshould resolve immediately when API is ready
[22m[39m[WebflowDesignerDetection] Designer API is ready

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould find ParagraphElement for introduction content
[22m[39m[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getAllElements: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  setSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  elementBuilder: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Available webflow methods: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getAllElements': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'setSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'elementBuilder': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mtrue[39m,
  canSelectElements: [33mtrue[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [
    [32m'getCurrentPage'[39m,
    [32m'getAllElements'[39m,
    [32m'getSelectedElement'[39m,
    [32m'setSelectedElement'[39m,
    [32m'elementBuilder'[39m
  ]
}

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould apply meta description recommendation
[22m[39m[WebflowInsertion] Applying request: {
  type: [32m'meta_description'[39m,
  pageId: [32m'page_123'[39m,
  value: [32m'New SEO-optimized meta description for better visibility'[39m
}

[90mstdout[2m | client/src/lib/webflowDesignerApiDetection.test.ts[2m > [22m[2mWebflow Designer API Detection[2m > [22m[2mwaitForWebflowDesigner[2m > [22m[2mshould timeout when API never becomes ready
[22m[39m[WebflowDesignerDetection] getCurrentPage failed: Error: Not ready
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowDesignerApiDetection.test.ts:147:53
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould find ParagraphElement for introduction content
[22m[39m[WebflowDesignerAPI] Waiting for API to be ready...

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould apply meta description recommendation
[22m[39m[WebflowInsertion] Using Data API to update meta description

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould find ParagraphElement for introduction content
[22m[39m[WebflowDesignerDetection] Designer API is ready

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould apply meta description recommendation
[22m[39m[WebflowInsertion] Apply result: {
  success: [33mtrue[39m,
  data: {
    _id: [32m'page_123'[39m,
    seo: {
      title: [32m'Existing Title'[39m,
      description: [32m'New SEO-optimized meta description for better visibility'[39m
    },
    lastUpdated: [32m'2025-10-19T22:36:15.196Z'[39m
  }
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould find ParagraphElement for introduction content
[22m[39m[WebflowDesignerAPI] API is ready

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould apply page SEO data (title + description)
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould find ParagraphElement for introduction content
[22m[39m[WebflowDesignerAPI] getAllElements returned: { count: [33m5[39m, type: [32m'object'[39m, isArray: [33mtrue[39m }
[WebflowDesignerAPI] Sample elements structure:
[WebflowDesignerAPI] Element 0: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-1'[39m,
  webflowType: [90mundefined[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Some content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 1: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-2'[39m,
  webflowType: [32m'HeadingElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Real H1 Content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [
    [32m'id'[39m,
    [32m'type'[39m,
    [32m'textContent'[39m,
    [32m'setTextContent'[39m,
    [32m'getTextContent'[39m,
    [32m'getText'[39m,
    [32m'getHeadingLevel'[39m
  ]
}
[WebflowDesignerAPI] Element 2: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-3'[39m,
  webflowType: [1mnull[22m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Null type content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'type'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 3: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-4'[39m,
  webflowType: [32m'ParagraphElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'This is a substantial paragraph with more than 50 characters to be considered for introduction'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'type'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 4: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-5'[39m,
  webflowType: [32m'HeadingElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'H2 Content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [
    [32m'id'[39m,
    [32m'type'[39m,
    [32m'textContent'[39m,
    [32m'setTextContent'[39m,
    [32m'getTextContent'[39m,
    [32m'getText'[39m,
    [32m'getHeadingLevel'[39m
  ]
}

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould apply page SEO data (title + description)
[22m[39m[WebflowInsertion] Applying request: {
  type: [32m'page_seo'[39m,
  pageId: [32m'page_123'[39m,
  value: {
    title: [32m'Optimized SEO Title'[39m,
    description: [32m'Optimized SEO description'[39m
  }
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould find ParagraphElement for introduction content
[22m[39m[WebflowDesignerAPI] Found introduction paragraph: {
  type: [32m'ParagraphElement'[39m,
  id: [32m'element-4'[39m,
  textLength: [33m94[39m,
  textPreview: [32m'This is a substantial paragraph with more than 50 characters to be considered for introduction...'[39m
}

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould apply page SEO data (title + description)
[22m[39m[WebflowInsertion] Apply result: {
  success: [33mtrue[39m,
  data: {
    _id: [32m'page_123'[39m,
    seo: {
      title: [32m'Optimized SEO Title'[39m,
      description: [32m'Optimized SEO description'[39m
    },
    lastUpdated: [32m'2025-10-19T22:36:15.198Z'[39m
  }
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould successfully update H1 HeadingElement (when API permits)
[22m[39m[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getAllElements: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  setSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  elementBuilder: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Available webflow methods: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getAllElements': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'setSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'elementBuilder': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mtrue[39m,
  canSelectElements: [33mtrue[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [
    [32m'getCurrentPage'[39m,
    [32m'getAllElements'[39m,
    [32m'getSelectedElement'[39m,
    [32m'setSelectedElement'[39m,
    [32m'elementBuilder'[39m
  ]
}

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould apply CMS field recommendation
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould successfully update H1 HeadingElement (when API permits)
[22m[39m[WebflowDesignerAPI] Updating H1 heading content using Designer API
[WebflowDesignerAPI] content: New H1 Content
[WebflowDesignerAPI] Waiting for API to be ready...

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould apply CMS field recommendation
[22m[39m[WebflowInsertion] Applying request: {
  type: [32m'cms_field'[39m,
  pageId: [90mundefined[39m,
  value: [32m'Updated Blog Post Title'[39m
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould successfully update H1 HeadingElement (when API permits)
[22m[39m[WebflowDesignerDetection] Designer API is ready

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould apply CMS field recommendation
[22m[39m[WebflowInsertion] Apply result: {
  success: [33mtrue[39m,
  data: {
    _id: [32m'item_123'[39m,
    fieldData: {
      name: [32m'Updated Blog Post Title'[39m,
      slug: [32m'updated-blog-post-title'[39m
    },
    lastUpdated: [32m'2025-10-19T22:36:15.199Z'[39m
  }
}

[90mstdout[2m | client/src/contexts/AuthContext.test.tsx[2m > [22m[2mAuthContext[2m > [22m[2mBasic functionality[2m > [22m[2mshould render without errors when wrapped in providers
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould successfully update H1 HeadingElement (when API permits)
[22m[39m[WebflowDesignerAPI] API is ready

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mValidation[2m > [22m[2mshould validate required fields for page operations
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/AuthContext.test.tsx[2m > [22m[2mAuthContext[2m > [22m[2mBasic functionality[2m > [22m[2mshould render without errors when wrapped in providers
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould successfully update H1 HeadingElement (when API permits)
[22m[39m[WebflowDesignerAPI] Finding all H1 elements using Designer API

[90mstderr[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mValidation[2m > [22m[2mshould validate required fields for page operations
[22m[39m[WebflowInsertion] Apply error: Error: Page ID is required for page operations
    at WebflowInsertion.validateRequest [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:290:15[90m)[39m
    at WebflowInsertion.apply [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:87:12[90m)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.test.ts:202:38
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m

[90mstdout[2m | client/src/contexts/AuthContext.test.tsx[2m > [22m[2mAuthContext[2m > [22m[2mBasic functionality[2m > [22m[2mshould provide auth functions
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould successfully update H1 HeadingElement (when API permits)
[22m[39m[WebflowDesignerAPI] getAllElements returned: { count: [33m5[39m, type: [32m'object'[39m, isArray: [33mtrue[39m }
[WebflowDesignerAPI] Sample elements structure:
[WebflowDesignerAPI] Element 0: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-1'[39m,
  webflowType: [90mundefined[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Some content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 1: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-2'[39m,
  webflowType: [32m'HeadingElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Real H1 Content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [
    [32m'id'[39m,
    [32m'type'[39m,
    [32m'textContent'[39m,
    [32m'setTextContent'[39m,
    [32m'getTextContent'[39m,
    [32m'getText'[39m,
    [32m'getHeadingLevel'[39m
  ]
}
[WebflowDesignerAPI] Element 2: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-3'[39m,
  webflowType: [1mnull[22m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Null type content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'type'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 3: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-4'[39m,
  webflowType: [32m'ParagraphElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'This is a substantial paragraph with more than 50 characters to be considered for introduction'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'type'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 4: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-5'[39m,
  webflowType: [32m'HeadingElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'H2 Content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [
    [32m'id'[39m,
    [32m'type'[39m,
    [32m'textContent'[39m,
    [32m'setTextContent'[39m,
    [32m'getTextContent'[39m,
    [32m'getText'[39m,
    [32m'getHeadingLevel'[39m
  ]
}

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mValidation[2m > [22m[2mshould validate required fields for page operations
[22m[39m[WebflowInsertion] Applying request: { type: [32m'page_title'[39m, pageId: [90mundefined[39m, value: [32m'New Title'[39m }

[90mstderr[2m | client/src/contexts/AuthContext.test.tsx[2m > [22m[2mAuthContext[2m > [22m[2mBasic functionality[2m > [22m[2mshould provide auth functions
[22m[39mAn update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould successfully update H1 HeadingElement (when API permits)
[22m[39m[WebflowDesignerAPI] Found H1 elements: { count: [33m1[39m, elements: [ { id: [32m'element-2'[39m, type: [32m'HeadingElement'[39m } ] }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mValidation[2m > [22m[2mshould validate required fields for CMS operations
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mProvider Setup[2m > [22m[2mshould provide initial state when wrapped in provider
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/AuthContext.test.tsx[2m > [22m[2mAuthContext[2m > [22m[2mBasic functionality[2m > [22m[2mshould provide auth functions
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould successfully update H1 HeadingElement (when API permits)
[22m[39m[WebflowDesignerAPI] Updating element text: {
  elementId: [32m'element-2'[39m,
  elementType: [32m'HeadingElement'[39m,
  textLength: [33m14[39m,
  textPreview: [32m'New H1 Content'[39m
}

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mValidation[2m > [22m[2mshould validate required fields for CMS operations
[22m[39m[WebflowInsertion] Applying request: { type: [32m'cms_field'[39m, pageId: [90mundefined[39m, value: [32m'New Value'[39m }

[90mstderr[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mProvider Setup[2m > [22m[2mshould provide initial state when wrapped in provider
[22m[39mAn update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstdout[2m | client/src/contexts/AuthContext.test.tsx[2m > [22m[2mAuthContext[2m > [22m[2mBasic functionality[2m > [22m[2mshould handle login button clicks
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould successfully update H1 HeadingElement (when API permits)
[22m[39m[WebflowDesignerAPI] setTextContent result: { result: [33mtrue[39m, resultType: [32m'boolean'[39m, success: [33mtrue[39m }

[90mstderr[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mValidation[2m > [22m[2mshould validate required fields for CMS operations
[22m[39m[WebflowInsertion] Apply error: Error: CMS Item ID and Field ID are required for CMS operations
    at WebflowInsertion.validateRequest [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:296:15[90m)[39m
    at WebflowInsertion.apply [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:87:12[90m)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.test.ts:216:38
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mProvider Setup[2m > [22m[2mshould provide initial state when wrapped in provider
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/contexts/AuthContext.test.tsx[2m > [22m[2mAuthContext[2m > [22m[2mBasic functionality[2m > [22m[2mshould handle login button clicks
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould successfully update H1 HeadingElement (when API permits)
[22m[39m[WebflowDesignerAPI] Successfully updated H1 heading

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mValidation[2m > [22m[2mshould validate value types
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mProvider Setup[2m > [22m[2mshould initialize with custom WebflowInsertion instance
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/AuthContext.test.tsx[2m > [22m[2mAuthContext[2m > [22m[2mBasic functionality[2m > [22m[2mshould handle logout button clicks
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould successfully update H2 HeadingElement by index (when API permits)
[22m[39m[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getAllElements: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  setSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  elementBuilder: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Available webflow methods: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getAllElements': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'setSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'elementBuilder': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mtrue[39m,
  canSelectElements: [33mtrue[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [
    [32m'getCurrentPage'[39m,
    [32m'getAllElements'[39m,
    [32m'getSelectedElement'[39m,
    [32m'setSelectedElement'[39m,
    [32m'elementBuilder'[39m
  ]
}

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mValidation[2m > [22m[2mshould validate value types
[22m[39m[WebflowInsertion] Applying request: { type: [32m'page_title'[39m, pageId: [32m'page_123'[39m, value: [32m''[39m }

[90mstderr[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mProvider Setup[2m > [22m[2mshould initialize with custom WebflowInsertion instance
[22m[39mAn update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstdout[2m | client/src/contexts/AuthContext.test.tsx[2m > [22m[2mAuthContext[2m > [22m[2mBasic functionality[2m > [22m[2mshould handle logout button clicks
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould successfully update H2 HeadingElement by index (when API permits)
[22m[39m[WebflowDesignerAPI] Updating H2 heading content using Designer API
[WebflowDesignerAPI] content: New H2 Content index: [33m0[39m
[WebflowDesignerAPI] Waiting for API to be ready...

[90mstderr[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mValidation[2m > [22m[2mshould validate value types
[22m[39m[WebflowInsertion] Apply error: Error: Value cannot be empty
    at WebflowInsertion.validateRequest [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:307:15[90m)[39m
    at WebflowInsertion.apply [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:87:12[90m)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.test.ts:229:38
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mProvider Setup[2m > [22m[2mshould initialize with custom WebflowInsertion instance
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould successfully update H2 HeadingElement by index (when API permits)
[22m[39m[WebflowDesignerDetection] Designer API is ready

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mValidation[2m > [22m[2mshould validate page SEO value structure
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould handle successful single insertion
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/AuthContext.test.tsx[2m > [22m[2mAuthContext[2m > [22m[2mBasic functionality[2m > [22m[2mshould handle refresh button clicks
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould successfully update H2 HeadingElement by index (when API permits)
[22m[39m[WebflowDesignerAPI] API is ready

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mValidation[2m > [22m[2mshould validate page SEO value structure
[22m[39m[WebflowInsertion] Applying request: { type: [32m'page_seo'[39m, pageId: [32m'page_123'[39m, value: [32m'Invalid value'[39m }

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould handle successful single insertion
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/contexts/AuthContext.test.tsx[2m > [22m[2mAuthContext[2m > [22m[2mBasic functionality[2m > [22m[2mshould handle refresh button clicks
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould successfully update H2 HeadingElement by index (when API permits)
[22m[39m[WebflowDesignerAPI] Finding all H2 elements using H2DetectionSystem

[90mstderr[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mValidation[2m > [22m[2mshould validate page SEO value structure
[22m[39m[WebflowInsertion] Apply error: Error: Page SEO value must be an object with title and/or description
    at WebflowInsertion.validateRequest [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:303:15[90m)[39m
    at WebflowInsertion.apply [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:87:12[90m)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.test.ts:242:38
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m

[90mstdout[2m | client/src/contexts/AuthContext.test.tsx[2m > [22m[2mAuthContext[2m > [22m[2mBasic functionality[2m > [22m[2mshould handle refresh button clicks
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mValidation[2m > [22m[2mshould validate character limits
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstderr[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mValidation[2m > [22m[2mshould validate character limits
[22m[39m[WebflowInsertion] Apply error: Error: Page title must be less than 500 characters
    at WebflowInsertion.validateRequest [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:313:13[90m)[39m
    at WebflowInsertion.apply [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:87:12[90m)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.test.ts:255:38
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m

[90mstdout[2m | client/src/contexts/AuthContext.test.tsx[2m > [22m[2mAuthContext[2m > [22m[2mContext Usage[2m > [22m[2mshould throw error when used outside provider
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mValidation[2m > [22m[2mshould validate character limits
[22m[39m[WebflowInsertion] Applying request: {
  type: [32m'page_title'[39m,
  pageId: [32m'page_123'[39m,
  value: [32m'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'[39m
}

[90mstderr[2m | client/src/contexts/AuthContext.test.tsx[2m > [22m[2mAuthContext[2m > [22m[2mContext Usage[2m > [22m[2mshould throw error when used outside provider
[22m[39mAn update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould apply multiple recommendations in batch
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/AuthContext.test.tsx[2m > [22m[2mAuthContext[2m > [22m[2mContext Usage[2m > [22m[2mshould throw error when used outside provider
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould apply multiple recommendations in batch
[22m[39m[WebflowInsertion] Starting batch apply: {
  operationCount: [33m3[39m,
  operations: [
    { type: [32m'page_title'[39m, pageId: [32m'page_123'[39m },
    { type: [32m'meta_description'[39m, pageId: [32m'page_123'[39m },
    { type: [32m'page_title'[39m, pageId: [32m'page_456'[39m }
  ],
  rollbackEnabled: [90mundefined[39m
}
[WebflowInsertion] Applying request: { type: [32m'page_title'[39m, pageId: [32m'page_123'[39m, value: [32m'New Title 1'[39m }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould apply multiple recommendations in batch
[22m[39m[WebflowInsertion] Using Data API to update page title

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould handle failed single insertion
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

 [32m✓[39m client/src/contexts/HelpContext.test.tsx [2m([22m[2m20 tests[22m[2m)[22m[32m 59[2mms[22m[39m
[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould apply multiple recommendations in batch
[22m[39m[WebflowInsertion] Apply result: { success: [33mtrue[39m, data: { _id: [32m'page_123'[39m, title: [32m'New Title 1'[39m } }

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould handle failed single insertion
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould apply multiple recommendations in batch
[22m[39m[WebflowInsertion] Applying request: {
  type: [32m'meta_description'[39m,
  pageId: [32m'page_123'[39m,
  value: [32m'New Description 1'[39m
}

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould apply multiple recommendations in batch
[22m[39m[WebflowInsertion] Using Data API to update meta description

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould apply multiple recommendations in batch
[22m[39m[WebflowInsertion] Apply result: {
  success: [33mtrue[39m,
  data: { _id: [32m'page_123'[39m, seo: { description: [32m'New Description 1'[39m } }
}

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould apply multiple recommendations in batch
[22m[39m[WebflowInsertion] Applying request: { type: [32m'page_title'[39m, pageId: [32m'page_456'[39m, value: [32m'New Title 2'[39m }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould apply multiple recommendations in batch
[22m[39m[WebflowInsertion] Using Data API to update page title

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould apply multiple recommendations in batch
[22m[39m[WebflowInsertion] Apply result: { success: [33mtrue[39m, data: { _id: [32m'page_456'[39m, title: [32m'New Title 2'[39m } }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould apply multiple recommendations in batch
[22m[39m[WebflowInsertion] Batch apply completed: {
  succeeded: [33m3[39m,
  failed: [33m0[39m,
  total: [33m3[39m,
  success: [33mtrue[39m,
  results: [
    { success: [33mtrue[39m, error: [90mundefined[39m },
    { success: [33mtrue[39m, error: [90mundefined[39m },
    { success: [33mtrue[39m, error: [90mundefined[39m }
  ]
}

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould handle partial batch failures
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould handle partial batch failures
[22m[39m[WebflowInsertion] Starting batch apply: {
  operationCount: [33m3[39m,
  operations: [
    { type: [32m'page_title'[39m, pageId: [32m'page_123'[39m },
    { type: [32m'page_title'[39m, pageId: [32m'page_404'[39m },
    { type: [32m'page_title'[39m, pageId: [32m'page_789'[39m }
  ],
  rollbackEnabled: [90mundefined[39m
}
[WebflowInsertion] Applying request: { type: [32m'page_title'[39m, pageId: [32m'page_123'[39m, value: [32m'New Title'[39m }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould handle partial batch failures
[22m[39m[WebflowInsertion] Using Data API to update page title

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould handle partial batch failures
[22m[39m[WebflowInsertion] Apply result: { success: [33mtrue[39m, data: { _id: [32m'page_123'[39m, title: [32m'New Title'[39m } }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould handle partial batch failures
[22m[39m[WebflowInsertion] Applying request: { type: [32m'page_title'[39m, pageId: [32m'page_404'[39m, value: [32m'Will Fail'[39m }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould handle partial batch failures
[22m[39m[WebflowInsertion] Using Data API to update page title

[90mstderr[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould handle partial batch failures
[22m[39m[WebflowInsertion] Failed to update page title: Error: Page not found
    at Object.<anonymous> [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.test.ts:326:17[90m)[39m
    at Object.mockCall [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+spy@3.2.4/node_modules/[4m@vitest[24m/spy/dist/index.js:96:15[90m)[39m
    at Object.updatePage [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/tinyspy@4.0.3/node_modules/[4mtinyspy[24m/dist/index.js:47:103[90m)[39m
    at WebflowInsertion.applyPageTitle [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:372:44[90m)[39m
    at WebflowInsertion.apply [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:96:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at WebflowInsertion.applyBatch [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:189:22[90m)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.test.ts:333:22
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20

[90mstderr[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould handle partial batch failures
[22m[39m[WebflowInsertion] Apply error: Error: Page not found
    at Object.<anonymous> [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.test.ts:326:17[90m)[39m
    at Object.mockCall [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+spy@3.2.4/node_modules/[4m@vitest[24m/spy/dist/index.js:96:15[90m)[39m
    at Object.updatePage [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/tinyspy@4.0.3/node_modules/[4mtinyspy[24m/dist/index.js:47:103[90m)[39m
    at WebflowInsertion.applyPageTitle [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:372:44[90m)[39m
    at WebflowInsertion.apply [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:96:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at WebflowInsertion.applyBatch [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:189:22[90m)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.test.ts:333:22
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould handle partial batch failures
[22m[39m[WebflowInsertion] Applying request: { type: [32m'page_title'[39m, pageId: [32m'page_789'[39m, value: [32m'Another Title'[39m }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould handle partial batch failures
[22m[39m[WebflowInsertion] Using Data API to update page title

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould handle partial batch failures
[22m[39m[WebflowInsertion] Apply result: { success: [33mtrue[39m, data: { _id: [32m'page_789'[39m, title: [32m'Another Title'[39m } }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould handle partial batch failures
[22m[39m[WebflowInsertion] Batch apply completed: {
  succeeded: [33m2[39m,
  failed: [33m1[39m,
  total: [33m3[39m,
  success: [33mfalse[39m,
  results: [
    { success: [33mtrue[39m, error: [90mundefined[39m },
    { success: [33mfalse[39m, error: [36m[Object][39m },
    { success: [33mtrue[39m, error: [90mundefined[39m }
  ]
}

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould require confirmation for batch operations when specified
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould support rollback for batch operations
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould support rollback for batch operations
[22m[39m[WebflowInsertion] Starting batch apply: {
  operationCount: [33m1[39m,
  operations: [ { type: [32m'page_title'[39m, pageId: [32m'page_123'[39m } ],
  rollbackEnabled: [33mtrue[39m
}

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould support rollback for batch operations
[22m[39m[WebflowInsertion] Applying request: { type: [32m'page_title'[39m, pageId: [32m'page_123'[39m, value: [32m'New Title'[39m }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould support rollback for batch operations
[22m[39m[WebflowInsertion] Using Data API to update page title

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould support rollback for batch operations
[22m[39m[WebflowInsertion] Apply result: { success: [33mtrue[39m, data: { _id: [32m'page_123'[39m, title: [32m'New Title'[39m } }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould support rollback for batch operations
[22m[39m[WebflowInsertion] Batch apply completed: {
  succeeded: [33m1[39m,
  failed: [33m0[39m,
  total: [33m1[39m,
  success: [33mtrue[39m,
  results: [ { success: [33mtrue[39m, error: [90mundefined[39m } ]
}

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould support rollback for batch operations
[22m[39m[WebflowInsertion] Applying request: { type: [32m'page_title'[39m, pageId: [32m'page_123'[39m, value: [32m'Original Title'[39m }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould support rollback for batch operations
[22m[39m[WebflowInsertion] Using Data API to update page title

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mBatch Operations[2m > [22m[2mshould support rollback for batch operations
[22m[39m[WebflowInsertion] Apply result: { success: [33mtrue[39m, data: [90mundefined[39m }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mError Handling[2m > [22m[2mshould handle API errors gracefully
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mError Handling[2m > [22m[2mshould handle API errors gracefully
[22m[39m[WebflowInsertion] Applying request: { type: [32m'page_title'[39m, pageId: [32m'page_123'[39m, value: [32m'New Title'[39m }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mError Handling[2m > [22m[2mshould handle API errors gracefully
[22m[39m[WebflowInsertion] Using Data API to update page title

[90mstderr[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mError Handling[2m > [22m[2mshould handle API errors gracefully
[22m[39m[WebflowInsertion] Failed to update page title: Error: API Error: Server error
    at Object.<anonymous> [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.test.ts:413:15[90m)[39m
    at Object.mockCall [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+spy@3.2.4/node_modules/[4m@vitest[24m/spy/dist/index.js:96:15[90m)[39m
    at Object.updatePage [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/tinyspy@4.0.3/node_modules/[4mtinyspy[24m/dist/index.js:47:103[90m)[39m
    at WebflowInsertion.applyPageTitle [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:372:44[90m)[39m
    at WebflowInsertion.apply [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:96:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.test.ts:416:22
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20

[90mstderr[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mError Handling[2m > [22m[2mshould handle API errors gracefully
[22m[39m[WebflowInsertion] Apply error: Error: API Error: Server error
    at Object.<anonymous> [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.test.ts:413:15[90m)[39m
    at Object.mockCall [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+spy@3.2.4/node_modules/[4m@vitest[24m/spy/dist/index.js:96:15[90m)[39m
    at Object.updatePage [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/tinyspy@4.0.3/node_modules/[4mtinyspy[24m/dist/index.js:47:103[90m)[39m
    at WebflowInsertion.applyPageTitle [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:372:44[90m)[39m
    at WebflowInsertion.apply [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:96:31[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.test.ts:416:22
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mError Handling[2m > [22m[2mshould handle rate limiting errors
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mError Handling[2m > [22m[2mshould handle rate limiting errors
[22m[39m[WebflowInsertion] Applying request: { type: [32m'page_title'[39m, pageId: [32m'page_123'[39m, value: [32m'New Title'[39m }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mError Handling[2m > [22m[2mshould handle rate limiting errors
[22m[39m[WebflowInsertion] Using Data API to update page title

[90mstderr[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mError Handling[2m > [22m[2mshould handle rate limiting errors
[22m[39m[WebflowInsertion] Failed to update page title: Error: Rate Limited: Too many requests
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.test.ts:435:30
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m {
  rateLimitInfo: {
    remaining: [33m0[39m,
    limit: [33m100[39m,
    resetTime: [33m1760913435229[39m,
    retryAfter: [33m60000[39m
  }
}

[90mstderr[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mError Handling[2m > [22m[2mshould handle rate limiting errors
[22m[39m[WebflowInsertion] Apply error: Error: Rate Limited: Too many requests
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.test.ts:435:30
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m {
  rateLimitInfo: {
    remaining: [33m0[39m,
    limit: [33m100[39m,
    resetTime: [33m1760913435229[39m,
    retryAfter: [33m60000[39m
  }
}

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mError Handling[2m > [22m[2mshould validate permissions before applying
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mError Handling[2m > [22m[2mshould validate permissions before applying
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications
[WebflowInsertion] Applying request: { type: [32m'page_title'[39m, pageId: [32m'page_123'[39m, value: [32m'New Title'[39m }

[90mstderr[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mError Handling[2m > [22m[2mshould validate permissions before applying
[22m[39m[WebflowInsertion] Apply error: Error: Insufficient permissions: pages:write scope required
    at WebflowInsertion.checkPermissions [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:335:13[90m)[39m
    at WebflowInsertion.apply [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:90:18[90m)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.test.ts:475:46
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mProgress Tracking[2m > [22m[2mshould track progress for long operations
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mProgress Tracking[2m > [22m[2mshould track progress for long operations
[22m[39m[WebflowInsertion] Starting batch apply: {
  operationCount: [33m3[39m,
  operations: [
    { type: [32m'page_title'[39m, pageId: [32m'page_1'[39m },
    { type: [32m'page_title'[39m, pageId: [32m'page_2'[39m },
    { type: [32m'page_title'[39m, pageId: [32m'page_3'[39m }
  ],
  rollbackEnabled: [90mundefined[39m
}
[WebflowInsertion] Applying request: { type: [32m'page_title'[39m, pageId: [32m'page_1'[39m, value: [32m'Title 1'[39m }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mProgress Tracking[2m > [22m[2mshould track progress for long operations
[22m[39m[WebflowInsertion] Using Data API to update page title

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mProgress Tracking[2m > [22m[2mshould track progress for long operations
[22m[39m[WebflowInsertion] Apply result: { success: [33mtrue[39m, data: {} }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mProgress Tracking[2m > [22m[2mshould track progress for long operations
[22m[39m[WebflowInsertion] Applying request: { type: [32m'page_title'[39m, pageId: [32m'page_2'[39m, value: [32m'Title 2'[39m }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mProgress Tracking[2m > [22m[2mshould track progress for long operations
[22m[39m[WebflowInsertion] Using Data API to update page title

 [32m✓[39m client/src/components/ui/card.test.tsx [2m([22m[2m27 tests[22m[2m)[22m[32m 80[2mms[22m[39m
[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mProgress Tracking[2m > [22m[2mshould track progress for long operations
[22m[39m[WebflowInsertion] Apply result: { success: [33mtrue[39m, data: {} }

[90mstdout[2m | client/src/lib/webflowDesignerApiDetection.test.ts[2m > [22m[2mWebflow Designer API Detection[2m > [22m[2mwaitForWebflowDesigner[2m > [22m[2mshould timeout when API never becomes ready
[22m[39m[WebflowDesignerDetection] getCurrentPage failed: Error: Not ready
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowDesignerApiDetection.test.ts:147:53
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mProgress Tracking[2m > [22m[2mshould track progress for long operations
[22m[39m[WebflowInsertion] Applying request: { type: [32m'page_title'[39m, pageId: [32m'page_3'[39m, value: [32m'Title 3'[39m }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mProgress Tracking[2m > [22m[2mshould track progress for long operations
[22m[39m[WebflowInsertion] Using Data API to update page title

[90mstderr[2m | client/src/components/ui/toast.test.tsx[2m > [22m[2mToast Components[2m > [22m[2mToastProvider[2m > [22m[2mpasses props to underlying provider
[22m[39mReact does not recognize the `swipeDirection` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `swipedirection` instead. If you accidentally passed it from a parent component, remove it from the DOM element.

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould show loading state during insertion
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould show loading state during insertion
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould successfully update H2 HeadingElement by index (when API permits)
[22m[39m[WebflowDesignerAPI] Found H2 elements: {
  count: [33m1[39m,
  elements: [ { id: [32m'element-5'[39m, text: [32m'H2 Content'[39m, index: [33m0[39m } ]
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould successfully update H2 HeadingElement by index (when API permits)
[22m[39m[WebflowDesignerAPI] Updating element text: {
  elementId: [32m'element-5'[39m,
  elementType: [32m'HeadingElement'[39m,
  textLength: [33m14[39m,
  textPreview: [32m'New H2 Content'[39m
}

[90mstderr[2m | client/src/components/ui/sheet.test.tsx[2m > [22m[2mSheet Components[2m > [22m[2mSheet Root[2m > [22m[2mshould pass props to root component
[22m[39mReact does not recognize the `defaultOpen` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `defaultopen` instead. If you accidentally passed it from a parent component, remove it from the DOM element.

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould successfully update H2 HeadingElement by index (when API permits)
[22m[39m[WebflowDesignerAPI] setTextContent result: { result: [33mtrue[39m, resultType: [32m'boolean'[39m, success: [33mtrue[39m }

 [32m✓[39m client/src/components/ImageSizeDisplay.test.tsx [2m([22m[2m29 tests[22m[2m)[22m[32m 118[2mms[22m[39m
 [32m✓[39m client/src/components/Footer.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[32m 99[2mms[22m[39m
[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mElement Detection Using Webflow Types (FIXED)[2m > [22m[2mshould successfully update H2 HeadingElement by index (when API permits)
[22m[39m[WebflowDesignerAPI] Successfully updated H2 heading at index 0

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould safely filter elements ignoring those with undefined/null type
[22m[39m[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getAllElements: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  setSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  elementBuilder: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Available webflow methods: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getAllElements': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'setSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'elementBuilder': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mtrue[39m,
  canSelectElements: [33mtrue[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [
    [32m'getCurrentPage'[39m,
    [32m'getAllElements'[39m,
    [32m'getSelectedElement'[39m,
    [32m'setSelectedElement'[39m,
    [32m'elementBuilder'[39m
  ]
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould safely filter elements ignoring those with undefined/null type
[22m[39m[WebflowDesignerAPI] Waiting for API to be ready...

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould safely filter elements ignoring those with undefined/null type
[22m[39m[WebflowDesignerDetection] Designer API is ready

 [32m✓[39m client/src/contexts/AuthContext.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 143[2mms[22m[39m
[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould safely filter elements ignoring those with undefined/null type
[22m[39m[WebflowDesignerAPI] API is ready

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould safely filter elements ignoring those with undefined/null type
[22m[39m[WebflowDesignerAPI] getAllElements returned: { count: [33m5[39m, type: [32m'object'[39m, isArray: [33mtrue[39m }
[WebflowDesignerAPI] Sample elements structure:
[WebflowDesignerAPI] Element 0: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-1'[39m,
  webflowType: [90mundefined[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Some content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 1: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-2'[39m,
  webflowType: [32m'HeadingElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Real H1 Content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [
    [32m'id'[39m,
    [32m'type'[39m,
    [32m'textContent'[39m,
    [32m'setTextContent'[39m,
    [32m'getTextContent'[39m,
    [32m'getText'[39m,
    [32m'getHeadingLevel'[39m
  ]
}
[WebflowDesignerAPI] Element 2: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-3'[39m,
  webflowType: [1mnull[22m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Null type content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'type'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 3: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-4'[39m,
  webflowType: [32m'ParagraphElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'This is a substantial paragraph with more than 50 characters to be considered for introduction'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'type'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 4: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-5'[39m,
  webflowType: [32m'HeadingElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'H2 Content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [
    [32m'id'[39m,
    [32m'type'[39m,
    [32m'textContent'[39m,
    [32m'setTextContent'[39m,
    [32m'getTextContent'[39m,
    [32m'getText'[39m,
    [32m'getHeadingLevel'[39m
  ]
}

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould handle preview insertion
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould safely find introduction paragraph using Webflow element types
[22m[39m[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getAllElements: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  setSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  elementBuilder: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Available webflow methods: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getAllElements': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'setSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'elementBuilder': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mtrue[39m,
  canSelectElements: [33mtrue[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [
    [32m'getCurrentPage'[39m,
    [32m'getAllElements'[39m,
    [32m'getSelectedElement'[39m,
    [32m'setSelectedElement'[39m,
    [32m'elementBuilder'[39m
  ]
}

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mSingle Insertion Operations[2m > [22m[2mshould handle preview insertion
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould safely find introduction paragraph using Webflow element types
[22m[39m[WebflowDesignerAPI] Waiting for API to be ready...

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould safely find introduction paragraph using Webflow element types
[22m[39m[WebflowDesignerDetection] Designer API is ready

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould safely find introduction paragraph using Webflow element types
[22m[39m[WebflowDesignerAPI] API is ready

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould safely find introduction paragraph using Webflow element types
[22m[39m[WebflowDesignerAPI] getAllElements returned: { count: [33m5[39m, type: [32m'object'[39m, isArray: [33mtrue[39m }
[WebflowDesignerAPI] Sample elements structure:
[WebflowDesignerAPI] Element 0: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-1'[39m,
  webflowType: [90mundefined[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Some content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 1: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-2'[39m,
  webflowType: [32m'HeadingElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Real H1 Content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [
    [32m'id'[39m,
    [32m'type'[39m,
    [32m'textContent'[39m,
    [32m'setTextContent'[39m,
    [32m'getTextContent'[39m,
    [32m'getText'[39m,
    [32m'getHeadingLevel'[39m
  ]
}
[WebflowDesignerAPI] Element 2: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-3'[39m,
  webflowType: [1mnull[22m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Null type content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'type'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 3: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-4'[39m,
  webflowType: [32m'ParagraphElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'This is a substantial paragraph with more than 50 characters to be considered for introduction'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'type'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 4: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-5'[39m,
  webflowType: [32m'HeadingElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'H2 Content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [
    [32m'id'[39m,
    [32m'type'[39m,
    [32m'textContent'[39m,
    [32m'setTextContent'[39m,
    [32m'getTextContent'[39m,
    [32m'getText'[39m,
    [32m'getHeadingLevel'[39m
  ]
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould safely find introduction paragraph using Webflow element types
[22m[39m[WebflowDesignerAPI] Found introduction paragraph: {
  type: [32m'ParagraphElement'[39m,
  id: [32m'element-4'[39m,
  textLength: [33m94[39m,
  textPreview: [32m'This is a substantial paragraph with more than 50 characters to be considered for introduction...'[39m
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould successfully update H1 after filtering out invalid elements (when API permits)
[22m[39m[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getAllElements: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  setSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  elementBuilder: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Available webflow methods: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getAllElements': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'setSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'elementBuilder': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mtrue[39m,
  canSelectElements: [33mtrue[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [
    [32m'getCurrentPage'[39m,
    [32m'getAllElements'[39m,
    [32m'getSelectedElement'[39m,
    [32m'setSelectedElement'[39m,
    [32m'elementBuilder'[39m
  ]
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould successfully update H1 after filtering out invalid elements (when API permits)
[22m[39m[WebflowDesignerAPI] Updating H1 heading content using Designer API
[WebflowDesignerAPI] content: Updated H1 Content
[WebflowDesignerAPI] Waiting for API to be ready...

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould successfully update H1 after filtering out invalid elements (when API permits)
[22m[39m[WebflowDesignerDetection] Designer API is ready

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould successfully update H1 after filtering out invalid elements (when API permits)
[22m[39m[WebflowDesignerAPI] API is ready

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould successfully update H1 after filtering out invalid elements (when API permits)
[22m[39m[WebflowDesignerAPI] Finding all H1 elements using Designer API

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould successfully update H1 after filtering out invalid elements (when API permits)
[22m[39m[WebflowDesignerAPI] getAllElements returned: { count: [33m5[39m, type: [32m'object'[39m, isArray: [33mtrue[39m }
[WebflowDesignerAPI] Sample elements structure:
[WebflowDesignerAPI] Element 0: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-1'[39m,
  webflowType: [90mundefined[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Some content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 1: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-2'[39m,
  webflowType: [32m'HeadingElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Real H1 Content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [
    [32m'id'[39m,
    [32m'type'[39m,
    [32m'textContent'[39m,
    [32m'setTextContent'[39m,
    [32m'getTextContent'[39m,
    [32m'getText'[39m,
    [32m'getHeadingLevel'[39m
  ]
}
[WebflowDesignerAPI] Element 2: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-3'[39m,
  webflowType: [1mnull[22m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Null type content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'type'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 3: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-4'[39m,
  webflowType: [32m'ParagraphElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'This is a substantial paragraph with more than 50 characters to be considered for introduction'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'type'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 4: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'element-5'[39m,
  webflowType: [32m'HeadingElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'H2 Content'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [
    [32m'id'[39m,
    [32m'type'[39m,
    [32m'textContent'[39m,
    [32m'setTextContent'[39m,
    [32m'getTextContent'[39m,
    [32m'getText'[39m,
    [32m'getHeadingLevel'[39m
  ]
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould successfully update H1 after filtering out invalid elements (when API permits)
[22m[39m[WebflowDesignerAPI] Found H1 elements: { count: [33m1[39m, elements: [ { id: [32m'element-2'[39m, type: [32m'HeadingElement'[39m } ] }

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould successfully update H1 after filtering out invalid elements (when API permits)
[22m[39m[WebflowDesignerAPI] Updating element text: {
  elementId: [32m'element-2'[39m,
  elementType: [32m'HeadingElement'[39m,
  textLength: [33m18[39m,
  textPreview: [32m'Updated H1 Content'[39m
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould successfully update H1 after filtering out invalid elements (when API permits)
[22m[39m[WebflowDesignerAPI] setTextContent result: { result: [33mtrue[39m, resultType: [32m'boolean'[39m, success: [33mtrue[39m }

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould successfully update H1 after filtering out invalid elements (when API permits)
[22m[39m[WebflowDesignerAPI] Successfully updated H1 heading

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould handle empty type gracefully
[22m[39m[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getAllElements: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  setSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  elementBuilder: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Available webflow methods: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getAllElements': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'setSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'elementBuilder': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mtrue[39m,
  canSelectElements: [33mtrue[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [
    [32m'getCurrentPage'[39m,
    [32m'getAllElements'[39m,
    [32m'getSelectedElement'[39m,
    [32m'setSelectedElement'[39m,
    [32m'elementBuilder'[39m
  ]
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould handle empty type gracefully
[22m[39m[WebflowDesignerAPI] Waiting for API to be ready...

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould handle empty type gracefully
[22m[39m[WebflowDesignerDetection] Designer API is ready

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould handle empty type gracefully
[22m[39m[WebflowDesignerAPI] API is ready

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould handle empty type gracefully
[22m[39m[WebflowDesignerAPI] getAllElements returned: { count: [33m2[39m, type: [32m'object'[39m, isArray: [33mtrue[39m }
[WebflowDesignerAPI] Sample elements structure:
[WebflowDesignerAPI] Element 0: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'empty-1'[39m,
  webflowType: [32m''[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Empty type'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'type'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 1: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'valid-1'[39m,
  webflowType: [32m'HeadingElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Valid H2'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'type'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould correctly identify HeadingElements regardless of case
[22m[39m[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getAllElements: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  setSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  elementBuilder: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Available webflow methods: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getAllElements': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'setSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'elementBuilder': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mtrue[39m,
  canSelectElements: [33mtrue[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [
    [32m'getCurrentPage'[39m,
    [32m'getAllElements'[39m,
    [32m'getSelectedElement'[39m,
    [32m'setSelectedElement'[39m,
    [32m'elementBuilder'[39m
  ]
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould correctly identify HeadingElements regardless of case
[22m[39m[WebflowDesignerAPI] Waiting for API to be ready...

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould correctly identify HeadingElements regardless of case
[22m[39m[WebflowDesignerDetection] Designer API is ready

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould correctly identify HeadingElements regardless of case
[22m[39m[WebflowDesignerAPI] API is ready

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mExpected Behavior After Fix[2m > [22m[2mshould correctly identify HeadingElements regardless of case
[22m[39m[WebflowDesignerAPI] getAllElements returned: { count: [33m2[39m, type: [32m'object'[39m, isArray: [33mtrue[39m }
[WebflowDesignerAPI] Sample elements structure:
[WebflowDesignerAPI] Element 0: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'heading-1'[39m,
  webflowType: [32m'HeadingElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'First heading'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'type'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 1: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'heading-2'[39m,
  webflowType: [32m'HeadingElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Second heading'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'type'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mDefensive Programming Tests[2m > [22m[2mshould handle elements that are null or undefined
[22m[39m[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getAllElements: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  setSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  elementBuilder: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Available webflow methods: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getAllElements': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'setSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'elementBuilder': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mtrue[39m,
  canSelectElements: [33mtrue[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [
    [32m'getCurrentPage'[39m,
    [32m'getAllElements'[39m,
    [32m'getSelectedElement'[39m,
    [32m'setSelectedElement'[39m,
    [32m'elementBuilder'[39m
  ]
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mDefensive Programming Tests[2m > [22m[2mshould handle elements that are null or undefined
[22m[39m[WebflowDesignerAPI] Waiting for API to be ready...

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mDefensive Programming Tests[2m > [22m[2mshould handle elements that are null or undefined
[22m[39m[WebflowDesignerDetection] Designer API is ready

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mDefensive Programming Tests[2m > [22m[2mshould handle elements that are null or undefined
[22m[39m[WebflowDesignerAPI] API is ready

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mDefensive Programming Tests[2m > [22m[2mshould handle elements that are null or undefined
[22m[39m[WebflowDesignerAPI] getAllElements returned: { count: [33m4[39m, type: [32m'object'[39m, isArray: [33mtrue[39m }
[WebflowDesignerAPI] Sample elements structure:
[WebflowDesignerAPI] Element 0: {
  exists: [33mfalse[39m,
  objectType: [32m'object'[39m,
  id: [90mundefined[39m,
  webflowType: [90mundefined[39m,
  hasTextContent: [33mfalse[39m,
  textContentValue: [90mundefined[39m,
  hasGetTextContent: [33mfalse[39m,
  hasSetTextContent: [33mfalse[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [32m'N/A'[39m
}
[WebflowDesignerAPI] Element 1: {
  exists: [33mfalse[39m,
  objectType: [32m'undefined'[39m,
  id: [90mundefined[39m,
  webflowType: [90mundefined[39m,
  hasTextContent: [33mfalse[39m,
  textContentValue: [90mundefined[39m,
  hasGetTextContent: [33mfalse[39m,
  hasSetTextContent: [33mfalse[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [32m'N/A'[39m
}
[WebflowDesignerAPI] Element 2: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'valid-h1'[39m,
  webflowType: [32m'HeadingElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Valid H1'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'type'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 3: {
  exists: [33mfalse[39m,
  objectType: [32m'object'[39m,
  id: [90mundefined[39m,
  webflowType: [90mundefined[39m,
  hasTextContent: [33mfalse[39m,
  textContentValue: [90mundefined[39m,
  hasGetTextContent: [33mfalse[39m,
  hasSetTextContent: [33mfalse[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [32m'N/A'[39m
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mDefensive Programming Tests[2m > [22m[2mshould handle elements with non-string type
[22m[39m[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getAllElements: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  setSelectedElement: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  elementBuilder: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Available webflow methods: [
  [32m'getCurrentPage'[39m,
  [32m'getAllElements'[39m,
  [32m'getSelectedElement'[39m,
  [32m'setSelectedElement'[39m,
  [32m'elementBuilder'[39m
]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getAllElements': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'setSelectedElement': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'elementBuilder': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mtrue[39m,
  canSelectElements: [33mtrue[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [
    [32m'getCurrentPage'[39m,
    [32m'getAllElements'[39m,
    [32m'getSelectedElement'[39m,
    [32m'setSelectedElement'[39m,
    [32m'elementBuilder'[39m
  ]
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mDefensive Programming Tests[2m > [22m[2mshould handle elements with non-string type
[22m[39m[WebflowDesignerAPI] Waiting for API to be ready...

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mDefensive Programming Tests[2m > [22m[2mshould handle elements with non-string type
[22m[39m[WebflowDesignerDetection] Designer API is ready

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mDefensive Programming Tests[2m > [22m[2mshould handle elements with non-string type
[22m[39m[WebflowDesignerAPI] API is ready

[90mstdout[2m | client/src/lib/webflowDesignerApi.realworld.test.ts[2m > [22m[2mWebflowDesignerAPI Real-world Error Reproduction[2m > [22m[2mDefensive Programming Tests[2m > [22m[2mshould handle elements with non-string type
[22m[39m[WebflowDesignerAPI] getAllElements returned: { count: [33m3[39m, type: [32m'object'[39m, isArray: [33mtrue[39m }
[WebflowDesignerAPI] Sample elements structure:
[WebflowDesignerAPI] Element 0: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'invalid-1'[39m,
  webflowType: [33m123[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Number type'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'type'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 1: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'invalid-2'[39m,
  webflowType: { nested: [32m'object'[39m },
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Object type'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'type'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}
[WebflowDesignerAPI] Element 2: {
  exists: [33mtrue[39m,
  objectType: [32m'object'[39m,
  id: [32m'valid-1'[39m,
  webflowType: [32m'HeadingElement'[39m,
  hasTextContent: [33mtrue[39m,
  textContentValue: [32m'Valid H1'[39m,
  hasGetTextContent: [33mtrue[39m,
  hasSetTextContent: [33mtrue[39m,
  hasTagName: [33mfalse[39m,
  tagName: [90mundefined[39m,
  allKeys: [ [32m'id'[39m, [32m'type'[39m, [32m'textContent'[39m, [32m'setTextContent'[39m, [32m'getTextContent'[39m ]
}

 [32m✓[39m client/src/main.test.tsx [2m([22m[2m10 tests[22m[2m)[22m[32m 289[2mms[22m[39m
[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mProgress Tracking[2m > [22m[2mshould track progress for long operations
[22m[39m[WebflowInsertion] Apply result: { success: [33mtrue[39m, data: {} }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mProgress Tracking[2m > [22m[2mshould track progress for long operations
[22m[39m[WebflowInsertion] Batch apply completed: {
  succeeded: [33m3[39m,
  failed: [33m0[39m,
  total: [33m3[39m,
  success: [33mtrue[39m,
  results: [
    { success: [33mtrue[39m, error: [90mundefined[39m },
    { success: [33mtrue[39m, error: [90mundefined[39m },
    { success: [33mtrue[39m, error: [90mundefined[39m }
  ]
}

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mCollection ID Resolution[2m > [22m[2mshould resolve collection ID for CMS items
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mCollection ID Resolution[2m > [22m[2mshould resolve collection ID for CMS items
[22m[39m[WebflowInsertion] Applying request: { type: [32m'cms_field'[39m, pageId: [90mundefined[39m, value: [32m'New Value'[39m }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mCollection ID Resolution[2m > [22m[2mshould resolve collection ID for CMS items
[22m[39m[WebflowInsertion] Apply result: { success: [33mtrue[39m, data: {} }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mCollection ID Resolution[2m > [22m[2mshould cache collection ID lookups
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mCollection ID Resolution[2m > [22m[2mshould cache collection ID lookups
[22m[39m[WebflowInsertion] Applying request: { type: [32m'cms_field'[39m, pageId: [90mundefined[39m, value: [32m'New Value'[39m }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mCollection ID Resolution[2m > [22m[2mshould cache collection ID lookups
[22m[39m[WebflowInsertion] Apply result: { success: [33mtrue[39m, data: {} }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mCollection ID Resolution[2m > [22m[2mshould cache collection ID lookups
[22m[39m[WebflowInsertion] Applying request: { type: [32m'cms_field'[39m, pageId: [90mundefined[39m, value: [32m'New Value'[39m }

[90mstdout[2m | client/src/lib/webflowInsertion.test.ts[2m > [22m[2mWebflowInsertion[2m > [22m[2mCollection ID Resolution[2m > [22m[2mshould cache collection ID lookups
[22m[39m[WebflowInsertion] Apply result: { success: [33mtrue[39m, data: {} }

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mBatch Operations[2m > [22m[2mshould handle successful batch insertion
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mBatch Operations[2m > [22m[2mshould handle successful batch insertion
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstderr[2m | client/src/components/ui/sidebar.test.tsx[2m > [22m[2mSidebar Components[2m > [22m[2mSidebar[2m > [22m[2mshould render mobile sheet when isMobile is true
[22m[39mUnknown event handler property `onOpenChange`. It will be ignored.

 [32m✓[39m client/src/lib/webflowDesignerApi.realworld.test.ts [2m([22m[2m11 tests[22m[2m)[22m[33m 344[2mms[22m[39m
 [32m✓[39m client/src/components/ui/switch.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[32m 113[2mms[22m[39m
 [32m✓[39m client/src/lib/webflowInsertion.test.ts [2m([22m[2m19 tests[22m[2m)[22m[33m 395[2mms[22m[39m
   [33m[2m✓[22m[39m WebflowInsertion[2m > [22mProgress Tracking[2m > [22mshould track progress for long operations [33m 335[2mms[22m[39m
[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mBatch Operations[2m > [22m[2mshould handle partial batch failure
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mBatch Operations[2m > [22m[2mshould handle partial batch failure
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/lib/webflowDesignerApiDetection.test.ts[2m > [22m[2mWebflow Designer API Detection[2m > [22m[2mwaitForWebflowDesigner[2m > [22m[2mshould timeout when API never becomes ready
[22m[39m[WebflowDesignerDetection] Designer API failed to become ready within timeout

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mBatch Operations[2m > [22m[2mshould handle rollback operation
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

 [32m✓[39m client/src/components/ui/scroll-area.test.tsx [2m([22m[2m21 tests[22m[2m)[22m[32m 137[2mms[22m[39m
 [32m✓[39m client/src/components/ui/button.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[32m 162[2mms[22m[39m
[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mBatch Operations[2m > [22m[2mshould handle rollback operation
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

 [32m✓[39m client/src/components/ui/dialog.test.tsx [2m([22m[2m13 tests[22m[2m)[22m[32m 179[2mms[22m[39m
[90mstdout[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould render nothing when no schemas provided
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

 [32m✓[39m client/src/components/ui/toast.test.tsx [2m([22m[2m32 tests[22m[2m)[22m[32m 235[2mms[22m[39m
 [32m✓[39m client/src/components/ui/sheet.test.tsx [2m([22m[2m34 tests[22m[2m)[22m[32m 202[2mms[22m[39m
[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mPending Operations Management[2m > [22m[2mshould add operations to pending list
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mPending Operations Management[2m > [22m[2mshould add operations to pending list
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould render collapsed by default
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstderr[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould render collapsed by default
[22m[39mAn update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 [32m✓[39m client/src/lib/webflowDesignerApiDetection.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 545[2mms[22m[39m
   [33m[2m✓[22m[39m Webflow Designer API Detection[2m > [22mwaitForWebflowDesigner[2m > [22mshould timeout when API never becomes ready [33m 524[2mms[22m[39m
[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mPending Operations Management[2m > [22m[2mshould prevent duplicate pending operations
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mPending Operations Management[2m > [22m[2mshould prevent duplicate pending operations
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould expand when clicked
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstderr[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould expand when clicked
[22m[39mAn update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 [32m✓[39m client/src/components/ui/input.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[33m 329[2mms[22m[39m
[90mstdout[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould display Google support badges correctly
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstderr[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould display Google support badges correctly
[22m[39mAn update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstdout[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould show required schemas section
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstderr[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould show required schemas section
[22m[39mAn update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mPending Operations Management[2m > [22m[2mshould clear pending operations
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mPending Operations Management[2m > [22m[2mshould clear pending operations
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould show optional schemas section with checkboxes
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstderr[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould show optional schemas section with checkboxes
[22m[39mAn update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstdout[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould toggle optional schema visibility when checkbox is clicked
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mPending Operations Management[2m > [22m[2mshould remove specific operation from pending
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mPending Operations Management[2m > [22m[2mshould remove specific operation from pending
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mPending Operations Management[2m > [22m[2mshould remove specific operation from pending
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstderr[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mPending Operations Management[2m > [22m[2mshould remove specific operation from pending
[22m[39mAn update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mPending Operations Management[2m > [22m[2mshould remove specific operation from pending
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mError Management[2m > [22m[2mshould clear errors when requested
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mError Management[2m > [22m[2mshould clear errors when requested
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould display documentation links
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstderr[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould display documentation links
[22m[39mAn update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 [32m✓[39m client/src/components/ui/H2SelectionList.test.tsx [2m([22m[2m15 tests[22m[2m)[22m[33m 624[2mms[22m[39m
 [32m✓[39m client/src/components/ui/sidebar.test.tsx [2m([22m[2m64 tests[22m[2m)[22m[33m 495[2mms[22m[39m
[90mstdout[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould display Google support notes when present
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstderr[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould display Google support notes when present
[22m[39mAn update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstdout[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould display page type context
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

 [32m✓[39m client/src/components/ui/toaster.test.tsx [2m([22m[2m12 tests[22m[2m)[22m[33m 495[2mms[22m[39m
[90mstderr[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould display page type context
[22m[39mAn update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mError Management[2m > [22m[2mshould auto-clear errors after successful operations
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould display helpful tip
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mError Management[2m > [22m[2mshould auto-clear errors after successful operations
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstderr[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould display helpful tip
[22m[39mAn update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 [32m✓[39m client/src/components/ui/ApplyButton.test.tsx [2m([22m[2m21 tests[22m[2m)[22m[33m 725[2mms[22m[39m
[90mstdout[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould handle multiple schemas correctly
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstderr[2m | client/src/components/ui/schema-display.test.tsx[2m > [22m[2mSchemaDisplay[2m > [22m[2mshould handle multiple schemas correctly
[22m[39mAn update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mHistory Management[2m > [22m[2mshould track insertion history
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mHistory Management[2m > [22m[2mshould track insertion history
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

 [32m✓[39m client/src/components/ui/schema-display.test.tsx [2m([22m[2m12 tests[22m[2m)[22m[33m 532[2mms[22m[39m
 [32m✓[39m client/src/services/aiRecommendations.test.ts [2m([22m[2m12 tests[22m[2m)[22m[33m 1031[2mms[22m[39m
   [33m[2m✓[22m[39m AI Recommendations Service[2m > [22mError Recovery[2m > [22mshould retry failed requests with exponential backoff [33m 1013[2mms[22m[39m
[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mHistory Management[2m > [22m[2mshould limit history size
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications
[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mHistory Management[2m > [22m[2mshould limit history size
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mHistory Management[2m > [22m[2mshould limit history size
[22m[39m[WebflowInsertion] Applying request: { type: [32m'page_title'[39m, pageId: [32m'page_123'[39m, value: [32m'Test Title'[39m }

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mHistory Management[2m > [22m[2mshould limit history size
[22m[39m[WebflowInsertion] Using Data API to update page title

[90mstderr[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mHistory Management[2m > [22m[2mshould limit history size
[22m[39m[WebflowInsertion] Failed to update page title: Error: Data API not available - using Designer Extension APIs
    at Object.updatePage [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\contexts\InsertionContext.tsx:189:42[90m)[39m
    at WebflowInsertion.applyPageTitle [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:372:44[90m)[39m
    at WebflowInsertion.apply [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:96:31[90m)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\contexts\InsertionContext.tsx:231:22

[90mstderr[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mHistory Management[2m > [22m[2mshould limit history size
[22m[39m[WebflowInsertion] Apply error: Error: Data API not available - using Designer Extension APIs
    at Object.updatePage [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\contexts\InsertionContext.tsx:189:42[90m)[39m
    at WebflowInsertion.applyPageTitle [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:372:44[90m)[39m
    at WebflowInsertion.apply [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:96:31[90m)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\contexts\InsertionContext.tsx:231:22

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mHistory Management[2m > [22m[2mshould limit history size
[22m[39m[WebflowInsertion] Applying request: { type: [32m'page_title'[39m, pageId: [32m'page_123'[39m, value: [32m'Test Title'[39m }

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mHistory Management[2m > [22m[2mshould limit history size
[22m[39m[WebflowInsertion] Using Data API to update page title

[90mstderr[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mHistory Management[2m > [22m[2mshould limit history size
[22m[39m[WebflowInsertion] Failed to update page title: Error: Data API not available - using Designer Extension APIs
    at Object.updatePage [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\contexts\InsertionContext.tsx:189:42[90m)[39m
    at WebflowInsertion.applyPageTitle [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:372:44[90m)[39m
    at WebflowInsertion.apply [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:96:31[90m)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\contexts\InsertionContext.tsx:231:22

[90mstderr[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mHistory Management[2m > [22m[2mshould limit history size
[22m[39m[WebflowInsertion] Apply error: Error: Data API not available - using Designer Extension APIs
    at Object.updatePage [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\contexts\InsertionContext.tsx:189:42[90m)[39m
    at WebflowInsertion.applyPageTitle [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:372:44[90m)[39m
    at WebflowInsertion.apply [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:96:31[90m)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\contexts\InsertionContext.tsx:231:22

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mHistory Management[2m > [22m[2mshould limit history size
[22m[39m[WebflowInsertion] Applying request: { type: [32m'page_title'[39m, pageId: [32m'page_123'[39m, value: [32m'Test Title'[39m }

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mHistory Management[2m > [22m[2mshould limit history size
[22m[39m[WebflowInsertion] Using Data API to update page title

[90mstderr[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mHistory Management[2m > [22m[2mshould limit history size
[22m[39m[WebflowInsertion] Failed to update page title: Error: Data API not available - using Designer Extension APIs
    at Object.updatePage [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\contexts\InsertionContext.tsx:189:42[90m)[39m
    at WebflowInsertion.applyPageTitle [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:372:44[90m)[39m
    at WebflowInsertion.apply [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:96:31[90m)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\contexts\InsertionContext.tsx:231:22

[90mstderr[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mHistory Management[2m > [22m[2mshould limit history size
[22m[39m[WebflowInsertion] Apply error: Error: Data API not available - using Designer Extension APIs
    at Object.updatePage [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\contexts\InsertionContext.tsx:189:42[90m)[39m
    at WebflowInsertion.applyPageTitle [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:372:44[90m)[39m
    at WebflowInsertion.apply [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.ts:96:31[90m)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\contexts\InsertionContext.tsx:231:22

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mrenders without crashing
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] Webflow Designer context detected
[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSiteInfo: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  subscribe: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSiteInfo': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'subscribe': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mfalse[39m,
  canSelectElements: [33mfalse[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
}
[WebflowInsertion] Using Webflow Designer Extension APIs for modifications

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mrenders without crashing
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mHistory Management[2m > [22m[2mshould include timestamps in history
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mHistory Management[2m > [22m[2mshould include timestamps in history
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mdisplays keyphrase input field
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] Webflow Designer context detected
[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSiteInfo: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  subscribe: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSiteInfo': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'subscribe': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mfalse[39m,
  canSelectElements: [33mfalse[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
}
[WebflowInsertion] Using Webflow Designer Extension APIs for modifications

[90mstderr[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mdisplays keyphrase input field
[22m[39mAn update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mdisplays keyphrase input field
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstderr[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mdisplays keyphrase input field
[22m[39mAn update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mProgress Tracking[2m > [22m[2mshould track batch operation progress
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mProgress Tracking[2m > [22m[2mshould track batch operation progress
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mshows analyze button
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] Webflow Designer context detected
[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSiteInfo: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  subscribe: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSiteInfo': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'subscribe': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mfalse[39m,
  canSelectElements: [33mfalse[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
}
[WebflowInsertion] Using Webflow Designer Extension APIs for modifications

[90mstderr[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mshows analyze button
[22m[39mAn update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mshows analyze button
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstderr[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mshows analyze button
[22m[39mAn update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mhandles keyphrase input changes
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] Webflow Designer context detected
[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSiteInfo: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  subscribe: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSiteInfo': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'subscribe': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mfalse[39m,
  canSelectElements: [33mfalse[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
}
[WebflowInsertion] Using Webflow Designer Extension APIs for modifications

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mhandles keyphrase input changes
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mProgress Tracking[2m > [22m[2mshould clear progress after completion
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/contexts/InsertionContext.test.tsx[2m > [22m[2mInsertionContext[2m > [22m[2mProgress Tracking[2m > [22m[2mshould clear progress after completion
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

 [32m✓[39m client/src/components/ui/language-selector.test.tsx [2m([22m[2m12 tests[22m[2m)[22m[33m 764[2mms[22m[39m
 [32m✓[39m client/src/components/ui/BatchApplyButton.test.tsx [2m([22m[2m26 tests[22m[2m)[22m[33m 1168[2mms[22m[39m
 [32m✓[39m client/src/contexts/InsertionContext.test.tsx [2m([22m[2m21 tests[22m[2m)[22m[33m 1461[2mms[22m[39m
[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mvalidates keyphrase length
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] Webflow Designer context detected
[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSiteInfo: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  subscribe: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSiteInfo': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'subscribe': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mfalse[39m,
  canSelectElements: [33mfalse[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
}
[WebflowInsertion] Using Webflow Designer Extension APIs for modifications

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mvalidates keyphrase length
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mprevents form submission when validation fails
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] Webflow Designer context detected
[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSiteInfo: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  subscribe: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSiteInfo': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'subscribe': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mfalse[39m,
  canSelectElements: [33mfalse[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
}
[WebflowInsertion] Using Webflow Designer Extension APIs for modifications

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mprevents form submission when validation fails
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mhandles rapid input changes and validation correctly
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] Webflow Designer context detected
[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSiteInfo: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  subscribe: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSiteInfo': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'subscribe': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mfalse[39m,
  canSelectElements: [33mfalse[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
}
[WebflowInsertion] Using Webflow Designer Extension APIs for modifications

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mhandles rapid input changes and validation correctly
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mhandles analysis errors gracefully
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] Webflow Designer context detected
[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSiteInfo: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  subscribe: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSiteInfo': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'subscribe': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mfalse[39m,
  canSelectElements: [33mfalse[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
}
[WebflowInsertion] Using Webflow Designer Extension APIs for modifications

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mhandles analysis errors gracefully
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstderr[2m | client/src/components/ui/popover.test.tsx[2m > [22m[2mPopover Components[2m > [22m[2mPopover Root[2m > [22m[2mshould pass props to root component
[22m[39mReact does not recognize the `defaultOpen` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `defaultopen` instead. If you accidentally passed it from a parent component, remove it from the DOM element.

 [32m✓[39m client/src/components/ui/form.test.tsx [2m([22m[2m29 tests[22m[2m)[22m[33m 2389[2mms[22m[39m
   [33m[2m✓[22m[39m Form Components[2m > [22mForm (FormProvider)[2m > [22mhandles form submission with valid data [33m 447[2mms[22m[39m
   [33m[2m✓[22m[39m Form Components[2m > [22mForm integration[2m > [22mclears error when field value becomes valid [33m 310[2mms[22m[39m
   [33m[2m✓[22m[39m Form Components[2m > [22mForm integration[2m > [22mhandles complex validation scenarios [33m 868[2mms[22m[39m
[90mstderr[2m | client/src/components/ui/popover.test.tsx[2m > [22m[2mPopover Components[2m > [22m[2mPopoverContent[2m > [22m[2mshould render content with default styling
[22m[39mReact does not recognize the `sideOffset` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `sideoffset` instead. If you accidentally passed it from a parent component, remove it from the DOM element.

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mhandles unpublished page error correctly
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] Webflow Designer context detected
[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSiteInfo: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  subscribe: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSiteInfo': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'subscribe': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mfalse[39m,
  canSelectElements: [33mfalse[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
}
[WebflowInsertion] Using Webflow Designer Extension APIs for modifications

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mhandles unpublished page error correctly
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

 [32m✓[39m client/src/components/ui/collapsible.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[32m 111[2mms[22m[39m
[90mstderr[2m | client/src/hooks/useOnboarding.test.tsx[2m > [22m[2museOnboarding[2m > [22m[2mPersistence[2m > [22m[2mshould handle corrupted localStorage data
[22m[39mFailed to load onboarding state: SyntaxError: Unexpected token 'i', "invalid-json" is not valid JSON
    at JSON.parse (<anonymous>)
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\hooks\useOnboarding.tsx:61:21
    at mountStateImpl [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mnode_modules\[4m.pnpm[24m\react-dom@19.1.1_react@19.1.1\node_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:6130:24[90m)[39m
    at mountState [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mnode_modules\[4m.pnpm[24m\react-dom@19.1.1_react@19.1.1\node_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:6151:22[90m)[39m
    at Object.useState [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mnode_modules\[4m.pnpm[24m\react-dom@19.1.1_react@19.1.1\node_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:22951:18[90m)[39m
    at useState [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mnode_modules\[4m.pnpm[24m\react@19.1.1\node_modules\[4mreact[24m\cjs\react.development.js:1222:34[90m)[39m
    at useOnboarding [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\hooks\useOnboarding.tsx:57:29[90m)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\hooks\useOnboarding.test.tsx:380:43
    at TestComponent [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mnode_modules\[4m.pnpm[24m\@testing-library+react@16.3_6479d15b625ec3d34ccbc3611f2e562b\node_modules\[4m@testing-library[24m\react\dist\pure.js:331:27[90m)[39m
    at Object.react_stack_bottom_frame [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mnode_modules\[4m.pnpm[24m\react-dom@19.1.1_react@19.1.1\node_modules\[4mreact-dom[24m\cjs\react-dom-client.development.js:23863:20[90m)[39m

 [32m✓[39m client/src/pages/OAuthCallback.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 116[2mms[22m[39m
 [32m✓[39m client/src/components/ui/popover.test.tsx [2m([22m[2m15 tests[22m[2m)[22m[32m 148[2mms[22m[39m
 [32m✓[39m client/src/components/ui/progress.test.tsx [2m([22m[2m17 tests[22m[2m)[22m[32m 130[2mms[22m[39m
 [32m✓[39m client/src/hooks/useOnboarding.test.tsx [2m([22m[2m24 tests[22m[2m)[22m[32m 124[2mms[22m[39m
 [32m✓[39m client/src/__tests__/integration/typeFixValidation.test.tsx [2m([22m[2m11 tests[22m[2m)[22m[32m 134[2mms[22m[39m
 [32m✓[39m client/src/components/ui/copy-tooltip.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 93[2mms[22m[39m
 [32m✓[39m client/src/components/ui/label.test.tsx [2m([22m[2m10 tests[22m[2m)[22m[32m 100[2mms[22m[39m
 [32m✓[39m client/src/components/ui/skeleton.test.tsx [2m([22m[2m15 tests[22m[2m)[22m[32m 131[2mms[22m[39m
[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mhandles no published domain found error
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] Webflow Designer context detected
[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSiteInfo: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  subscribe: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSiteInfo': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'subscribe': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mfalse[39m,
  canSelectElements: [33mfalse[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
}
[WebflowInsertion] Using Webflow Designer Extension APIs for modifications

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component[2m > [22m[2mhandles no published domain found error
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

 [32m✓[39m client/src/components/ui/separator.test.tsx [2m([22m[2m16 tests[22m[2m)[22m[32m 108[2mms[22m[39m
[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould successfully scrape a web page
[22m[39m[Web Scraper] Attempting to fetch URL: https://example.com/test-page

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould successfully scrape a web page
[22m[39m[Web Scraper] HEAD request status: [33m200[39m OK

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract title with fallbacks
[22m[39m[Web Scraper] Attempting to fetch URL: https://example.com

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract title with fallbacks
[22m[39m[Web Scraper] HEAD request status: [33m200[39m OK

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract meta description with fallbacks
[22m[39m[Web Scraper] Attempting to fetch URL: https://example.com

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract meta description with fallbacks
[22m[39m[Web Scraper] HEAD request status: [33m200[39m OK

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract headings with correct levels
[22m[39m[Web Scraper] Attempting to fetch URL: https://example.com

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract headings with correct levels
[22m[39m[Web Scraper] HEAD request status: [33m200[39m OK

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract paragraphs
[22m[39m[Web Scraper] Attempting to fetch URL: https://example.com

 [32m✓[39m client/src/components/Onboarding.test.tsx [2m([22m[2m20 tests[22m[2m)[22m[33m 2648[2mms[22m[39m
   [33m[2m✓[22m[39m Onboarding[2m > [22mAPI Key Setup[2m > [22mshould validate API key format [33m 1057[2mms[22m[39m
   [33m[2m✓[22m[39m Onboarding[2m > [22mInteractive Demo[2m > [22mshould simulate analysis [33m 859[2mms[22m[39m
[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract paragraphs
[22m[39m[Web Scraper] HEAD request status: [33m200[39m OK

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract images with alt text
[22m[39m[Web Scraper] Attempting to fetch URL: https://example.com

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract images with alt text
[22m[39m[Web Scraper] HEAD request status: [33m200[39m OK

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould categorize links correctly
[22m[39m[Web Scraper] Attempting to fetch URL: https://example.com/test-page

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould categorize links correctly
[22m[39m[Web Scraper] HEAD request status: [33m200[39m OK

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract resources (CSS and JS files)
[22m[39m[Web Scraper] Attempting to fetch URL: https://example.com

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract resources (CSS and JS files)
[22m[39m[Web Scraper] HEAD request status: [33m200[39m OK

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract canonical URL
[22m[39m[Web Scraper] Attempting to fetch URL: https://example.com

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract canonical URL
[22m[39m[Web Scraper] HEAD request status: [33m200[39m OK

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract meta keywords
[22m[39m[Web Scraper] Attempting to fetch URL: https://example.com

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract meta keywords
[22m[39m[Web Scraper] HEAD request status: [33m200[39m OK

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract Open Graph image
[22m[39m[Web Scraper] Attempting to fetch URL: https://example.com

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract Open Graph image
[22m[39m[Web Scraper] HEAD request status: [33m200[39m OK

 [32m✓[39m client/src/components/HelpSystem.test.tsx [2m([22m[2m17 tests[22m[2m)[22m[33m 2584[2mms[22m[39m
   [33m[2m✓[22m[39m HelpSystem[2m > [22mHelp Search[2m > [22mshould search help articles when typing [33m 535[2mms[22m[39m
   [33m[2m✓[22m[39m HelpSystem[2m > [22mHelp Analytics[2m > [22mshould track search queries [33m 758[2mms[22m[39m
[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract schema markup
[22m[39m[Web Scraper] Attempting to fetch URL: https://example.com

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract schema markup
[22m[39m[Web Scraper] HEAD request status: [33m200[39m OK

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract body text content
[22m[39m[Web Scraper] Attempting to fetch URL: https://example.com

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould extract body text content
[22m[39m[Web Scraper] HEAD request status: [33m200[39m OK

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould handle fetch errors
[22m[39m[Web Scraper] Attempting to fetch URL: https://example.com

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould handle fetch errors
[22m[39m[Web Scraper] HEAD request failed: Error: Network error
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\modules\webScraper.test.ts:271:39
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstderr[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould handle fetch errors
[22m[39m[Web Scraper] Error scraping web page: TypeError: Cannot read properties of undefined (reading 'ok')
    at scrapeWebPage [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\modules\webScraper.ts:31:19[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\modules\webScraper.test.ts:273:7
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould handle HTTP error responses
[22m[39m[Web Scraper] Attempting to fetch URL: https://example.com

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould handle HTTP error responses
[22m[39m[Web Scraper] HEAD request status: [33m200[39m OK

[90mstderr[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould handle HTTP error responses
[22m[39m[Web Scraper] Error scraping web page: Error: Failed to fetch page: 404 Not Found
    at scrapeWebPage [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\modules\webScraper.ts:32:13[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\modules\webScraper.test.ts:293:7
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould handle malformed HTML gracefully
[22m[39m[Web Scraper] Attempting to fetch URL: https://example.com

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould handle malformed HTML gracefully
[22m[39m[Web Scraper] HEAD request status: [33m200[39m OK

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould handle empty page content
[22m[39m[Web Scraper] Attempting to fetch URL: https://example.com

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould handle empty page content
[22m[39m[Web Scraper] HEAD request status: [33m200[39m OK

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould remove unwanted elements before analysis
[22m[39m[Web Scraper] Attempting to fetch URL: https://example.com

 [32m✓[39m client/src/components/ui/badge.test.tsx [2m([22m[2m23 tests[22m[2m)[22m[32m 121[2mms[22m[39m
[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould remove unwanted elements before analysis
[22m[39m[Web Scraper] HEAD request status: [33m200[39m OK

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould handle relative URLs in links correctly
[22m[39m[Web Scraper] Attempting to fetch URL: https://example.com/current-page

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould handle relative URLs in links correctly
[22m[39m[Web Scraper] HEAD request status: [33m200[39m OK

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould handle HTTPS and HTTP URL variations
[22m[39m[Web Scraper] Attempting to fetch URL: https://example.com

[90mstdout[2m | workers/modules/webScraper.test.ts[2m > [22m[2mwebScraper[2m > [22m[2mscrapeWebPage[2m > [22m[2mshould handle HTTPS and HTTP URL variations
[22m[39m[Web Scraper] HEAD request status: [33m200[39m OK

 [32m✓[39m client/src/components/ui/select.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 91[2mms[22m[39m
 [32m✓[39m client/src/components/ui/progress-circle.test.tsx [2m([22m[2m14 tests[22m[2m)[22m[32m 137[2mms[22m[39m
 [32m✓[39m workers/modules/webScraper.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 132[2mms[22m[39m
[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component - Additional Coverage[2m > [22m[2mError Handling Scenarios[2m > [22m[2mhandles webflow API not available scenario
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component - Additional Coverage[2m > [22m[2mError Handling Scenarios[2m > [22m[2mhandles webflow API not available scenario
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

 [32m✓[39m client/src/hooks/use-toast.test.tsx [2m([22m[2m21 tests[22m[2m)[22m[32m 113[2mms[22m[39m
 [32m✓[39m client/src/App.test.tsx [2m([22m[2m9 tests[22m[2m)[22m[32m 134[2mms[22m[39m
 [32m✓[39m client/src/lib/utils.test.ts [2m([22m[2m39 tests[22m[2m)[22m[32m 51[2mms[22m[39m
 [32m✓[39m client/src/hooks/usePerformanceMonitoring.test.tsx [2m([22m[2m14 tests[22m[2m)[22m[32m 76[2mms[22m[39m
[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component - Additional Coverage[2m > [22m[2mError Handling Scenarios[2m > [22m[2mhandles getSiteInfo API errors
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] Webflow Designer context detected
[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSiteInfo: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  subscribe: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSiteInfo': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'subscribe': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mfalse[39m,
  canSelectElements: [33mfalse[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
}
[WebflowInsertion] Using Webflow Designer Extension APIs for modifications

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component - Additional Coverage[2m > [22m[2mError Handling Scenarios[2m > [22m[2mhandles getSiteInfo API errors
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstderr[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component - Additional Coverage[2m > [22m[2mError Handling Scenarios[2m > [22m[2mhandles getSiteInfo API errors
[22m[39mHome: Failed to initialize page keywords: Error: Site info error
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\pages\Home.test.tsx:471:52
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

 [32m✓[39m client/src/components/ui/tooltip.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 85[2mms[22m[39m
 [32m✓[39m client/src/components/ui/alert.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 117[2mms[22m[39m
 [32m✓[39m client/src/lib/webflowDataApi.test.ts [2m([22m[2m36 tests[22m[2m)[22m[32m 62[2mms[22m[39m
 [32m✓[39m client/src/components/WebflowAppWrapper.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[32m 76[2mms[22m[39m
[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component - Additional Coverage[2m > [22m[2mError Handling Scenarios[2m > [22m[2mhandles getCurrentPage API errors during analysis
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] Webflow Designer context detected
[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSiteInfo: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  subscribe: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSiteInfo': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'subscribe': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mfalse[39m,
  canSelectElements: [33mfalse[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
}
[WebflowInsertion] Using Webflow Designer Extension APIs for modifications

[90mstderr[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component - Additional Coverage[2m > [22m[2mError Handling Scenarios[2m > [22m[2mhandles getCurrentPage API errors during analysis
[22m[39mHome: Failed to initialize page keywords: Error: Page fetch error
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\pages\Home.test.tsx:492:28
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component - Additional Coverage[2m > [22m[2mError Handling Scenarios[2m > [22m[2mhandles getCurrentPage API errors during analysis
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould perform comprehensive SEO analysis
[22m[39m[Backend H2 Debug] H2 text: Secondary SEO Topic Another H2 Heading
[Backend H2 Debug] Keyphrase: SEO
[Backend H2 Debug] Match result: {
  found: [33mtrue[39m,
  matchedKeyword: [32m'SEO'[39m,
  keywordResults: [ { keyword: [32m'SEO'[39m, passed: [33mtrue[39m, isPrimary: [33mtrue[39m } ]
}

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould use different word count requirements for homepage vs regular page
[22m[39m[Backend H2 Debug] H2 text: Secondary SEO Topic Another H2 Heading
[Backend H2 Debug] Keyphrase: SEO
[Backend H2 Debug] Match result: {
  found: [33mtrue[39m,
  matchedKeyword: [32m'SEO'[39m,
  keywordResults: [ { keyword: [32m'SEO'[39m, passed: [33mtrue[39m, isPrimary: [33mtrue[39m } ]
}

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould use different word count requirements for homepage vs regular page
[22m[39m[Backend H2 Debug] H2 text: Secondary SEO Topic Another H2 Heading
[Backend H2 Debug] Keyphrase: SEO
[Backend H2 Debug] Match result: {
  found: [33mtrue[39m,
  matchedKeyword: [32m'SEO'[39m,
  keywordResults: [ { keyword: [32m'SEO'[39m, passed: [33mtrue[39m, isPrimary: [33mtrue[39m } ]
}

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould prefer Webflow API data when available
[22m[39m[Backend H2 Debug] H2 text: Secondary SEO Topic Another H2 Heading
[Backend H2 Debug] Keyphrase: Webflow
[Backend H2 Debug] Match result: {
  found: [33mfalse[39m,
  matchedKeyword: [90mundefined[39m,
  keywordResults: [ { keyword: [32m'Webflow'[39m, passed: [33mfalse[39m, isPrimary: [33mtrue[39m } ]
}

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould handle secondary keywords correctly
[22m[39m[Backend H2 Debug] H2 text: Secondary SEO Topic Another H2 Heading
[Backend H2 Debug] Keyphrase: NonExistentKeyword
[Backend H2 Debug] Match result: {
  found: [33mfalse[39m,
  matchedKeyword: [90mundefined[39m,
  keywordResults: [
    { keyword: [32m'NonExistentKeyword'[39m, passed: [33mfalse[39m, isPrimary: [33mtrue[39m },
    { keyword: [32m'optimization'[39m, passed: [33mfalse[39m, isPrimary: [33mfalse[39m },
    { keyword: [32m'techniques'[39m, passed: [33mfalse[39m, isPrimary: [33mfalse[39m },
    { keyword: [32m'strategies'[39m, passed: [33mfalse[39m, isPrimary: [33mfalse[39m }
  ]
}

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould calculate keyphrase density correctly
[22m[39m[Backend H2 Debug] H2 text: Secondary SEO Topic Another H2 Heading
[Backend H2 Debug] Keyphrase: SEO
[Backend H2 Debug] Match result: {
  found: [33mtrue[39m,
  matchedKeyword: [32m'SEO'[39m,
  keywordResults: [ { keyword: [32m'SEO'[39m, passed: [33mtrue[39m, isPrimary: [33mtrue[39m } ]
}

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould detect images without alt text
[22m[39m[Backend H2 Debug] H2 text: Secondary SEO Topic Another H2 Heading
[Backend H2 Debug] Keyphrase: SEO
[Backend H2 Debug] Match result: {
  found: [33mtrue[39m,
  matchedKeyword: [32m'SEO'[39m,
  keywordResults: [ { keyword: [32m'SEO'[39m, passed: [33mtrue[39m, isPrimary: [33mtrue[39m } ]
}

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould analyze image formats for next-gen recommendations
[22m[39m[Backend H2 Debug] H2 text: Secondary SEO Topic Another H2 Heading
[Backend H2 Debug] Keyphrase: SEO
[Backend H2 Debug] Match result: {
  found: [33mtrue[39m,
  matchedKeyword: [32m'SEO'[39m,
  keywordResults: [ { keyword: [32m'SEO'[39m, passed: [33mtrue[39m, isPrimary: [33mtrue[39m } ]
}

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould check heading hierarchy
[22m[39m[Backend H2 Debug] H2 text: Secondary SEO Topic Another H2 Heading
[Backend H2 Debug] Keyphrase: SEO
[Backend H2 Debug] Match result: {
  found: [33mtrue[39m,
  matchedKeyword: [32m'SEO'[39m,
  keywordResults: [ { keyword: [32m'SEO'[39m, passed: [33mtrue[39m, isPrimary: [33mtrue[39m } ]
}

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould detect missing H1 in heading hierarchy
[22m[39m[Backend H2 Debug] H2 text: H2 without H1
[Backend H2 Debug] Keyphrase: SEO
[Backend H2 Debug] Match result: {
  found: [33mfalse[39m,
  matchedKeyword: [90mundefined[39m,
  keywordResults: [ { keyword: [32m'SEO'[39m, passed: [33mfalse[39m, isPrimary: [33mtrue[39m } ]
}

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould analyze code minification
[22m[39m[Backend H2 Debug] H2 text: Secondary SEO Topic Another H2 Heading
[Backend H2 Debug] Keyphrase: SEO
[Backend H2 Debug] Match result: {
  found: [33mtrue[39m,
  matchedKeyword: [32m'SEO'[39m,
  keywordResults: [ { keyword: [32m'SEO'[39m, passed: [33mtrue[39m, isPrimary: [33mtrue[39m } ]
}

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould detect schema markup
[22m[39m[Backend H2 Debug] H2 text: Secondary SEO Topic Another H2 Heading
[Backend H2 Debug] Keyphrase: SEO
[Backend H2 Debug] Match result: {
  found: [33mtrue[39m,
  matchedKeyword: [32m'SEO'[39m,
  keywordResults: [ { keyword: [32m'SEO'[39m, passed: [33mtrue[39m, isPrimary: [33mtrue[39m } ]
}

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould check image file sizes
[22m[39m[Backend H2 Debug] H2 text: Secondary SEO Topic Another H2 Heading
[Backend H2 Debug] Keyphrase: SEO
[Backend H2 Debug] Match result: {
  found: [33mtrue[39m,
  matchedKeyword: [32m'SEO'[39m,
  keywordResults: [ { keyword: [32m'SEO'[39m, passed: [33mtrue[39m, isPrimary: [33mtrue[39m } ]
}

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould handle Open Graph image from multiple sources
[22m[39m[Backend H2 Debug] H2 text: Secondary SEO Topic Another H2 Heading
[Backend H2 Debug] Keyphrase: SEO
[Backend H2 Debug] Match result: {
  found: [33mtrue[39m,
  matchedKeyword: [32m'SEO'[39m,
  keywordResults: [ { keyword: [32m'SEO'[39m, passed: [33mtrue[39m, isPrimary: [33mtrue[39m } ]
}

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould handle Open Graph image from multiple sources
[22m[39m[Backend H2 Debug] H2 text: Secondary SEO Topic Another H2 Heading
[Backend H2 Debug] Keyphrase: SEO
[Backend H2 Debug] Match result: {
  found: [33mtrue[39m,
  matchedKeyword: [32m'SEO'[39m,
  keywordResults: [ { keyword: [32m'SEO'[39m, passed: [33mtrue[39m, isPrimary: [33mtrue[39m } ]
}

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould handle Open Graph title and description
[22m[39m[Backend H2 Debug] H2 text: Secondary SEO Topic Another H2 Heading
[Backend H2 Debug] Keyphrase: SEO
[Backend H2 Debug] Match result: {
  found: [33mtrue[39m,
  matchedKeyword: [32m'SEO'[39m,
  keywordResults: [ { keyword: [32m'SEO'[39m, passed: [33mtrue[39m, isPrimary: [33mtrue[39m } ]
}

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould handle URL keyword matching with canonical URLs
[22m[39m[Backend H2 Debug] H2 text: Secondary SEO Topic Another H2 Heading
[Backend H2 Debug] Keyphrase: seo
[Backend H2 Debug] Match result: {
  found: [33mtrue[39m,
  matchedKeyword: [32m'seo'[39m,
  keywordResults: [ { keyword: [32m'seo'[39m, passed: [33mtrue[39m, isPrimary: [33mtrue[39m } ]
}

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould handle empty or missing data gracefully
[22m[39m[Backend H2 Debug] H2 text: 
[Backend H2 Debug] Keyphrase: test
[Backend H2 Debug] Match result: { found: [33mfalse[39m, keywordResults: [] }

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould include AI recommendations when enabled
[22m[39m[Backend H2 Debug] H2 text: Secondary SEO Topic Another H2 Heading
[Backend H2 Debug] Keyphrase: NonExistentKeyword
[Backend H2 Debug] Match result: {
  found: [33mfalse[39m,
  matchedKeyword: [90mundefined[39m,
  keywordResults: [
    { keyword: [32m'NonExistentKeyword'[39m, passed: [33mfalse[39m, isPrimary: [33mtrue[39m },
    { keyword: [32m'optimization'[39m, passed: [33mfalse[39m, isPrimary: [33mfalse[39m },
    { keyword: [32m'techniques'[39m, passed: [33mfalse[39m, isPrimary: [33mfalse[39m },
    { keyword: [32m'strategies'[39m, passed: [33mfalse[39m, isPrimary: [33mfalse[39m }
  ]
}

[90mstderr[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould handle AI recommendation errors gracefully
[22m[39m[SEO Analysis] Error generating AI recommendation for Keyphrase in Title: Error: AI API Error
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\modules\seoAnalysis.test.ts:992:54
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstderr[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould handle AI recommendation errors gracefully
[22m[39m[SEO Analysis] Error generating AI recommendation for Keyphrase in Meta Description: Error: AI API Error
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\modules\seoAnalysis.test.ts:992:54
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstderr[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould handle AI recommendation errors gracefully
[22m[39m[SEO Analysis] Error generating AI recommendation for Keyphrase in URL: Error: AI API Error
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\modules\seoAnalysis.test.ts:992:54
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstderr[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould handle AI recommendation errors gracefully
[22m[39m[SEO Analysis] Error generating AI recommendation for Keyphrase in Introduction: Error: AI API Error
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\modules\seoAnalysis.test.ts:992:54
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstderr[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould handle AI recommendation errors gracefully
[22m[39m[SEO Analysis] Error generating AI recommendation for Keyphrase in H1 Heading: Error: AI API Error
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\modules\seoAnalysis.test.ts:992:54
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould handle AI recommendation errors gracefully
[22m[39m[Backend H2 Debug] H2 text: Secondary SEO Topic Another H2 Heading
[Backend H2 Debug] Keyphrase: NonExistentKeyword
[Backend H2 Debug] Match result: {
  found: [33mfalse[39m,
  matchedKeyword: [90mundefined[39m,
  keywordResults: [ { keyword: [32m'NonExistentKeyword'[39m, passed: [33mfalse[39m, isPrimary: [33mtrue[39m } ]
}

[90mstderr[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould handle AI recommendation errors gracefully
[22m[39m[SEO Analysis] Error generating AI recommendation for Keyphrase in H2 Headings: Error: AI API Error
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\modules\seoAnalysis.test.ts:992:54
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstderr[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould handle AI recommendation errors gracefully
[22m[39m[SEO Analysis] Error getting AI recommendation for image alt attributes: Error: AI API Error
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\modules\seoAnalysis.test.ts:992:54
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstdout[2m | workers/modules/seoAnalysis.test.ts[2m > [22m[2mseoAnalysis[2m > [22m[2manalyzeSEOElements[2m > [22m[2mshould calculate correct SEO scores
[22m[39m[Backend H2 Debug] H2 text: Secondary SEO Topic Another H2 Heading
[Backend H2 Debug] Keyphrase: SEO
[Backend H2 Debug] Match result: {
  found: [33mtrue[39m,
  matchedKeyword: [32m'SEO'[39m,
  keywordResults: [ { keyword: [32m'SEO'[39m, passed: [33mtrue[39m, isPrimary: [33mtrue[39m } ]
}

 [32m✓[39m client/src/components/ui/editable-recommendation.test.tsx [2m([22m[2m19 tests[22m[2m)[22m[33m 3630[2mms[22m[39m
   [33m[2m✓[22m[39m EditableRecommendation[2m > [22mallows editing the recommendation text [33m 520[2mms[22m[39m
   [33m[2m✓[22m[39m EditableRecommendation[2m > [22msaves changes when save button is clicked [33m 538[2mms[22m[39m
   [33m[2m✓[22m[39m EditableRecommendation[2m > [22mcancels changes when cancel button is clicked [33m 423[2mms[22m[39m
   [33m[2m✓[22m[39m EditableRecommendation[2m > [22msaves changes with Ctrl+Enter keyboard shortcut [33m 418[2mms[22m[39m
   [33m[2m✓[22m[39m EditableRecommendation[2m > [22mcancels changes with Escape keyboard shortcut [33m 412[2mms[22m[39m
   [33m[2m✓[22m[39m EditableRecommendation[2m > [22mcalls onCopy with current edited text when copy button is clicked [33m 588[2mms[22m[39m
 [32m✓[39m workers/modules/seoAnalysis.test.ts [2m([22m[2m60 tests[22m[2m)[22m[32m 67[2mms[22m[39m
[90mstderr[2m | client/src/services/analytics.test.ts[2m > [22m[2mAnalytics Service[2m > [22m[2mAnalytics Persistence[2m > [22m[2mshould handle corrupted localStorage data gracefully
[22m[39mFailed to load analytics data from storage: SyntaxError: Unexpected token 'i', "invalid json" is not valid JSON
    at JSON.parse (<anonymous>)
    at AnalyticsService.initialize [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\services\analytics.ts:65:51[90m)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\services\analytics.test.ts:407:37
    at Proxy.assertThrows [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/chai@5.3.1/node_modules/[4mchai[24m/lib/chai/core/assertions.js:2774:5[90m)[39m
    at Proxy.methodWrapper [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/chai@5.3.1/node_modules/[4mchai[24m/lib/chai/utils/addMethod.js:56:25[90m)[39m
    at Proxy.<anonymous> [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+expect@3.2.4/node_modules/[4m@vitest[24m/expect/dist/index.js:1088:12[90m)[39m
    at Proxy.overwritingMethodWrapper [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/chai@5.3.1/node_modules/[4mchai[24m/lib/chai/utils/overwriteMethod.js:76:33[90m)[39m
    at Proxy.<anonymous> [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+expect@3.2.4/node_modules/[4m@vitest[24m/expect/dist/index.js:1420:16[90m)[39m
    at Proxy.<anonymous> [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+expect@3.2.4/node_modules/[4m@vitest[24m/expect/dist/index.js:1029:14[90m)[39m
    at Proxy.methodWrapper [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/chai@5.3.1/node_modules/[4mchai[24m/lib/chai/utils/addMethod.js:56:25[90m)[39m

[90mstdout[2m | client/src/services/analytics.test.ts[2m > [22m[2mAnalytics Service[2m > [22m[2mAnalytics API Integration[2m > [22m[2mshould send analytics data to remote analytics service
[22m[39mSuccessfully synced 1 events

[90mstdout[2m | client/src/services/analytics.test.ts[2m > [22m[2mAnalytics Service[2m > [22m[2mAnalytics API Integration[2m > [22m[2mshould send analytics data to remote analytics service
[22m[39mSuccessfully synced 1 events

[90mstdout[2m | client/src/services/analytics.test.ts[2m > [22m[2mAnalytics Service[2m > [22m[2mAnalytics API Integration[2m > [22m[2mshould batch analytics events for efficient transmission
[22m[39mSuccessfully synced 1 events

[90mstdout[2m | client/src/services/analytics.test.ts[2m > [22m[2mAnalytics Service[2m > [22m[2mAnalytics API Integration[2m > [22m[2mshould batch analytics events for efficient transmission
[22m[39mSuccessfully synced 2 events

[90mstdout[2m | client/src/services/analytics.test.ts[2m > [22m[2mAnalytics Service[2m > [22m[2mAnalytics API Integration[2m > [22m[2mshould batch analytics events for efficient transmission
[22m[39mSuccessfully synced 3 events

[90mstdout[2m | client/src/services/analytics.test.ts[2m > [22m[2mAnalytics Service[2m > [22m[2mAnalytics API Integration[2m > [22m[2mshould batch analytics events for efficient transmission
[22m[39mSuccessfully synced 4 events

[90mstdout[2m | client/src/services/analytics.test.ts[2m > [22m[2mAnalytics Service[2m > [22m[2mAnalytics API Integration[2m > [22m[2mshould batch analytics events for efficient transmission
[22m[39mSuccessfully synced 5 events

[90mstdout[2m | client/src/services/analytics.test.ts[2m > [22m[2mAnalytics Service[2m > [22m[2mAnalytics API Integration[2m > [22m[2mshould batch analytics events for efficient transmission
[22m[39mSuccessfully synced 6 events

[90mstdout[2m | client/src/services/analytics.test.ts[2m > [22m[2mAnalytics Service[2m > [22m[2mAnalytics API Integration[2m > [22m[2mshould batch analytics events for efficient transmission
[22m[39mSuccessfully synced 7 events

[90mstdout[2m | client/src/services/analytics.test.ts[2m > [22m[2mAnalytics Service[2m > [22m[2mAnalytics API Integration[2m > [22m[2mshould batch analytics events for efficient transmission
[22m[39mSuccessfully synced 8 events

[90mstdout[2m | client/src/services/analytics.test.ts[2m > [22m[2mAnalytics Service[2m > [22m[2mAnalytics API Integration[2m > [22m[2mshould batch analytics events for efficient transmission
[22m[39mSuccessfully synced 9 events

[90mstdout[2m | client/src/services/analytics.test.ts[2m > [22m[2mAnalytics Service[2m > [22m[2mAnalytics API Integration[2m > [22m[2mshould batch analytics events for efficient transmission
[22m[39mSuccessfully synced 10 events

[90mstdout[2m | client/src/services/analytics.test.ts[2m > [22m[2mAnalytics Service[2m > [22m[2mAnalytics API Integration[2m > [22m[2mshould batch analytics events for efficient transmission
[22m[39mSuccessfully synced 10 events

 [32m✓[39m client/src/hooks/useAppliedRecommendations.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 106[2mms[22m[39m
[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component - Additional Coverage[2m > [22m[2mPage Change Subscription[2m > [22m[2mdoes not reload when page path remains the same
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] Webflow Designer context detected
[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSiteInfo: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  subscribe: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSiteInfo': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'subscribe': {
  type: [32m'function'[39m,
  length: [33m2[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mfalse[39m,
  canSelectElements: [33mfalse[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
}
[WebflowInsertion] Using Webflow Designer Extension APIs for modifications

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component - Additional Coverage[2m > [22m[2mPage Change Subscription[2m > [22m[2mdoes not reload when page path remains the same
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstderr[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component - Additional Coverage[2m > [22m[2mPage Change Subscription[2m > [22m[2mdoes not reload when page path remains the same
[22m[39mHome: Failed to initialize page keywords: TypeError: Cannot read properties of undefined (reading 'pageType')
    at initializePageKeywords [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\pages\Home.tsx:556:34[90m)[39m

 [32m✓[39m client/src/services/analytics.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 64[2mms[22m[39m
[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component - Additional Coverage[2m > [22m[2mTest Mode Functionality[2m > [22m[2mshows test button in development mode
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] Webflow Designer context detected
[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSiteInfo: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  subscribe: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSiteInfo': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'subscribe': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mfalse[39m,
  canSelectElements: [33mfalse[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
}
[WebflowInsertion] Using Webflow Designer Extension APIs for modifications

[90mstderr[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component - Additional Coverage[2m > [22m[2mTest Mode Functionality[2m > [22m[2mshows test button in development mode
[22m[39mAn update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component - Additional Coverage[2m > [22m[2mTest Mode Functionality[2m > [22m[2mshows test button in development mode
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstderr[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component - Additional Coverage[2m > [22m[2mTest Mode Functionality[2m > [22m[2mshows test button in development mode
[22m[39mAn update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
Home: Failed to initialize page keywords: TypeError: Cannot read properties of undefined (reading 'pageType')
    at initializePageKeywords [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\pages\Home.tsx:556:34[90m)[39m

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component - Additional Coverage[2m > [22m[2mAdvanced Options Persistent Settings[2m > [22m[2mshould hide advanced options section by default
[22m[39m[InsertionContext] No OAuth token available - will use Designer Extension APIs directly
[WebflowInsertion] Webflow Designer context detected
[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  getSiteInfo: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  subscribe: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'getSiteInfo': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'subscribe': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mfalse[39m,
  canUpdatePageMeta: [33mfalse[39m,
  canUpdatePageSlug: [33mfalse[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mfalse[39m,
  canManipulateElements: [33mfalse[39m,
  canSelectElements: [33mfalse[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [ [32m'getCurrentPage'[39m, [32m'getSiteInfo'[39m, [32m'subscribe'[39m ]
}
[WebflowInsertion] Using Webflow Designer Extension APIs for modifications

[90mstderr[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component - Additional Coverage[2m > [22m[2mAdvanced Options Persistent Settings[2m > [22m[2mshould hide advanced options section by default
[22m[39mAn update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

[90mstdout[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component - Additional Coverage[2m > [22m[2mAdvanced Options Persistent Settings[2m > [22m[2mshould hide advanced options section by default
[22m[39m[AuthContext] No OAuth token found - Designer Extension will use Designer APIs directly

[90mstderr[2m | client/src/pages/Home.test.tsx[2m > [22m[2mHome Component - Additional Coverage[2m > [22m[2mAdvanced Options Persistent Settings[2m > [22m[2mshould hide advanced options section by default
[22m[39mAn update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to Home inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 [31m❯[39m client/src/pages/Home.test.tsx [2m([22m[2m16 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 3380[2mms[22m[39m
   [32m✓[39m Home Component[2m > [22mrenders without crashing[32m 191[2mms[22m[39m
   [32m✓[39m Home Component[2m > [22mdisplays keyphrase input field[32m 33[2mms[22m[39m
   [32m✓[39m Home Component[2m > [22mshows analyze button[32m 50[2mms[22m[39m
   [33m[2m✓[22m[39m Home Component[2m > [22mhandles keyphrase input changes [33m 323[2mms[22m[39m
   [32m✓[39m Home Component[2m > [22mvalidates keyphrase length[32m 198[2mms[22m[39m
   [32m✓[39m Home Component[2m > [22mprevents form submission when validation fails[32m 175[2mms[22m[39m
   [33m[2m✓[22m[39m Home Component[2m > [22mhandles rapid input changes and validation correctly [33m 361[2mms[22m[39m
   [33m[2m✓[22m[39m Home Component[2m > [22mhandles analysis errors gracefully [33m 376[2mms[22m[39m
   [33m[2m✓[22m[39m Home Component[2m > [22mhandles unpublished page error correctly [33m 316[2mms[22m[39m
   [33m[2m✓[22m[39m Home Component[2m > [22mhandles no published domain found error [33m 357[2mms[22m[39m
[31m   [31m×[31m Home Component - Additional Coverage[2m > [22mError Handling Scenarios[2m > [22mhandles webflow API not available scenario[39m[32m 161[2mms[22m[39m
[31m     → expected "warn" to be called with arguments: [ 'Home: Webflow API not available' ][90m

Received: 

[1m  1st warn call:

[22m[2m  [[22m
[32m-   "Home: Webflow API not available",[90m
[31m+   "Home:",[90m
[31m+   "Webflow API not available",[90m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"min-h-screen bg-background p-4 md:p-6 flex flex-col"[31m
        [33mstyle[31m=[32m"color: #FFFFFF"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"mx-auto w-full max-w-3xl space-y-6 flex-grow"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"w-full"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"rounded-lg border bg-background2 text-card-foreground shadow-sm w-full"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex flex-col space-y-1.5 p-6"[31m
              [36m>[31m
                [36m<h3[31m
                  [33mclass[31m=[32m"text-2xl font-semibold leading-none tracking-tight text-center"[31m
                [36m>[31m
                  [0mSEO Analysis Tool[0m
                [36m</h3>[31m
              [36m</div>[31m
              [36m<div[31m
                [33mclass[31m=[32m"p-6 pt-0"[31m
              [36m>[31m
                [36m<form[31m
                  [33mclass[31m=[32m"space-y-5 w-full"[31m
                [36m>[31m
                  [36m<div[31m
                    [33mclass[31m=[32m"space-y-2 w-full"[31m
                  [36m>[31m
                    [36m<div[31m
                      [33mclass[31m=[32m"flex justify-between items-center mb-1"[31m
                    [36m>[31m
                      [36m<label[31m
                        [33mclass[31m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 mb-0"[31m
                        [33mfor[31m=[32m"«r14»-form-item"[31m
                      [36m>[31m
                        [0mTarget keyphrase[0m
                      [36m</label>[31m
                      [36m<span[31m
                        [33mclass[31m=[32m"text-xs font-medium"[31m
                        [33mstyle[31m=[32m"color: var(--redText)"[31m
                      [36m>[31m
                        [0mNo keyword saved[0m
                      [36m</span>[31m
                    [36m</div>[31m
                    [36m<div[31m
                      [33maria-describedby[31m=[32m"«r14»-form-item-description"[31m
                      [33maria-invalid[31m=[32m"false"[31m
                      [33mclass[31m=[32m"mt-2 w-full mt-2"[31m
                      [33mid[31m=[32m"«r14»-form-item"[31m
                    [36m>[31m
                      [36m<input[31m
                        [33mclass[31m=[32m"flex h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 w-full"[31m
                        [33mname[31m=[32m"keyphrase"[31m
                        [33mplaceholder[31m=[32m"Enter your target keyphrase"[31m
                        [33mvalue[31m=[32m""[31m
                      [36m/>[31m
                    [36m</div>[31m
                  [36m</div>[31m
                  [36m<div[31m
                    [33mclass[31m=[32m"border-t pt-4 mt-4"[31m
                  [36m>[31m
                    [36m<div[31m
                      [33mclass[31m=[32m"flex items-center justify-between mb-4"[31m
                    [36m>[31m
                      [36m<div>[31m
                        [36m<h3[31m
                          [33mclass[31m=[32m"text-lg font-semibold"[31m
                        [36m>[31m
                          [0mAdvanced Analysis[0m
                        [36m</h3>[31m
                        [36m<p[31m
                          [33mclass[31m=[32m"text-sm text-muted-foreground"[31m
                        [36m>[31m
                          [0mAdd secondary keywords and specify page type for more targeted SEO analysis[0m
                        [36m</p>[31m
                      [36m</div>[31m
                      [36m<div[31m
                        [33mclass[31m=[32m"flex items-center space-x-2"[31m
                      [36m>[31m
                        [36m<button[31m
                          [33maria-checked[31m=[32m"false"[31m
                          [33mclass[31m=[32m"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[31m
                          [33mdata-state[31m=[32m"unchecked"[31m
                          [33mrole[31m=[32m"switch"[31m
                          [33mtype[31m=[32m"button"[31m
                          [33mvalue[31m=[32m"on"[31m
                        [36m>[31m
                          [36m<span[31m
                            [33mclass[31m=[32m"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"[31m
                            [33mdata-state[31m=[32m"unchecked"[31m
                          [36m/>[31m
                        [36m</button>[31m
                        [36m<input[31m
                          [33maria-hidden[31m=[32m"true"[31m
                          [33mstyle[31m=[32m"transform: translateX(-100%); width: 200px; height: 100px"[31m
                          [33mtabindex[31m=[32m"-1"[31m
                          [33mtype[31m=[32m"checkbox"[31m
                          [33mvalue[31m=[32m"on"[31m
                        [36m/>[31m
                        [36m<span[31m
                          [33mclass[31m=[32m"text-sm"[31m
                        [36m>[31m
                          [0mOff[0m
                        [36m</span>[31m
                      [36m</div>[31m
                    [36m</div>[31m
                  [36m</div>[31m
                  [36m<div[31m
                    [33mclass[31m=[32m"w-full pt-2"[31m
                  [36m>[31m
                    [36m<button[31m
                      [33mclass[31m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:...[39m
   [33m[2m✓[22m[39m Home Component - Additional Coverage[2m > [22mError Handling Scenarios[2m > [22mhandles getSiteInfo API errors [33m 334[2mms[22m[39m
   [33m[2m✓[22m[39m Home Component - Additional Coverage[2m > [22mError Handling Scenarios[2m > [22mhandles getCurrentPage API errors during analysis [33m 335[2mms[22m[39m
   [32m✓[39m Home Component - Additional Coverage[2m > [22mPage Change Subscription[2m > [22mdoes not reload when page path remains the same[32m 73[2mms[22m[39m
   [32m✓[39m Home Component - Additional Coverage[2m > [22mTest Mode Functionality[2m > [22mshows test button in development mode[32m 48[2mms[22m[39m
   [32m✓[39m Home Component - Additional Coverage[2m > [22mAdvanced Options Persistent Settings[2m > [22mshould hide advanced options section by default[32m 41[2mms[22m[39m
 [32m✓[39m client/src/lib/api.test.ts [2m([22m[2m27 tests[22m[2m)[22m[33m 5066[2mms[22m[39m
   [33m[2m✓[22m[39m api.ts error handling[2m > [22mImage size determination edge cases[2m > [22mhandles XHR timeout scenarios [33m 5017[2mms[22m[39m
 [32m✓[39m client/src/lib/webflowAuth.test.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 49[2mms[22m[39m
[90mstderr[2m | client/src/hooks/use-mobile.test.tsx[2m > [22m[2museMobile Hook[2m > [22m[2mshould update value when window is resized
[22m[39mAn update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 [32m✓[39m client/src/hooks/use-mobile.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[32m 56[2mms[22m[39m
 [32m✓[39m client/src/utils/advancedOptionsStorage.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 35[2mms[22m[39m
[90mstdout[2m | client/src/lib/webflowDesignerApi.test.ts[2m > [22m[2mWebflowDesignerExtensionAPI[2m > [22m[2mBasic API Functionality[2m > [22m[2mshould create API instance
[22m[39m[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  setPageSetting: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  updateCMSItem: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m, [32m'setPageSetting'[39m, [32m'updateCMSItem'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m, [32m'setPageSetting'[39m, [32m'updateCMSItem'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'setPageSetting': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'updateCMSItem': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mtrue[39m,
  canUpdatePageMeta: [33mtrue[39m,
  canUpdatePageSlug: [33mtrue[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mtrue[39m,
  canManipulateElements: [33mfalse[39m,
  canSelectElements: [33mfalse[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [ [32m'getCurrentPage'[39m, [32m'setPageSetting'[39m, [32m'updateCMSItem'[39m ]
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.test.ts[2m > [22m[2mWebflowDesignerExtensionAPI[2m > [22m[2mBasic API Functionality[2m > [22m[2mshould be properly instantiated
[22m[39m[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  setPageSetting: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  updateCMSItem: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m, [32m'setPageSetting'[39m, [32m'updateCMSItem'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m, [32m'setPageSetting'[39m, [32m'updateCMSItem'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'setPageSetting': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'updateCMSItem': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mtrue[39m,
  canUpdatePageMeta: [33mtrue[39m,
  canUpdatePageSlug: [33mtrue[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mtrue[39m,
  canManipulateElements: [33mfalse[39m,
  canSelectElements: [33mfalse[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [ [32m'getCurrentPage'[39m, [32m'setPageSetting'[39m, [32m'updateCMSItem'[39m ]
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.test.ts[2m > [22m[2mWebflowDesignerExtensionAPI[2m > [22m[2mAPI Method Coverage[2m > [22m[2mshould handle updatePageTitle correctly
[22m[39m[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  setPageSetting: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  updateCMSItem: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m, [32m'setPageSetting'[39m, [32m'updateCMSItem'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m, [32m'setPageSetting'[39m, [32m'updateCMSItem'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'setPageSetting': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'updateCMSItem': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mtrue[39m,
  canUpdatePageMeta: [33mtrue[39m,
  canUpdatePageSlug: [33mtrue[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mtrue[39m,
  canManipulateElements: [33mfalse[39m,
  canSelectElements: [33mfalse[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [ [32m'getCurrentPage'[39m, [32m'setPageSetting'[39m, [32m'updateCMSItem'[39m ]
}
[WebflowDesignerAPI] Updating page title using official API
[WebflowDesignerAPI] title: New Title

[90mstdout[2m | client/src/lib/webflowDesignerApi.test.ts[2m > [22m[2mWebflowDesignerExtensionAPI[2m > [22m[2mAPI Method Coverage[2m > [22m[2mshould handle updatePageTitle correctly
[22m[39m[WebflowDesignerAPI] Got current page: {
  setTitle: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.test.ts[2m > [22m[2mWebflowDesignerExtensionAPI[2m > [22m[2mAPI Method Coverage[2m > [22m[2mshould handle updatePageTitle correctly
[22m[39m[WebflowDesignerAPI] Successfully updated page title

[90mstdout[2m | client/src/lib/webflowDesignerApi.test.ts[2m > [22m[2mWebflowDesignerExtensionAPI[2m > [22m[2mAPI Method Coverage[2m > [22m[2mshould handle updatePageMetaDescription correctly
[22m[39m[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  setPageSetting: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  updateCMSItem: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m, [32m'setPageSetting'[39m, [32m'updateCMSItem'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m, [32m'setPageSetting'[39m, [32m'updateCMSItem'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'setPageSetting': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'updateCMSItem': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mtrue[39m,
  canUpdatePageMeta: [33mtrue[39m,
  canUpdatePageSlug: [33mtrue[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mtrue[39m,
  canManipulateElements: [33mfalse[39m,
  canSelectElements: [33mfalse[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [ [32m'getCurrentPage'[39m, [32m'setPageSetting'[39m, [32m'updateCMSItem'[39m ]
}
[WebflowDesignerAPI] Updating page meta description using official API
[WebflowDesignerAPI] description: New Description

[90mstdout[2m | client/src/lib/webflowDesignerApi.test.ts[2m > [22m[2mWebflowDesignerExtensionAPI[2m > [22m[2mAPI Method Coverage[2m > [22m[2mshould handle updatePageMetaDescription correctly
[22m[39m[WebflowDesignerAPI] Got current page: {
  setMetadata: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.test.ts[2m > [22m[2mWebflowDesignerExtensionAPI[2m > [22m[2mAPI Method Coverage[2m > [22m[2mshould handle updatePageMetaDescription correctly
[22m[39m[WebflowDesignerAPI] Successfully updated page meta description

[90mstdout[2m | client/src/lib/webflowDesignerApi.test.ts[2m > [22m[2mWebflowDesignerExtensionAPI[2m > [22m[2mAPI Method Coverage[2m > [22m[2mshould handle updatePageSlug correctly
[22m[39m[WebflowDesignerDetection] === WEBFLOW API INSPECTION ===
[WebflowDesignerDetection] typeof window.webflow: object
[WebflowDesignerDetection] window.webflow: {
  getCurrentPage: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  setPageSetting: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  },
  updateCMSItem: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}
[WebflowDesignerDetection] Available webflow properties: [ [32m'getCurrentPage'[39m, [32m'setPageSetting'[39m, [32m'updateCMSItem'[39m ]
[WebflowDesignerDetection] Available webflow methods: [ [32m'getCurrentPage'[39m, [32m'setPageSetting'[39m, [32m'updateCMSItem'[39m ]
[WebflowDesignerDetection] Method 'getCurrentPage': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'setPageSetting': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Method 'updateCMSItem': {
  type: [32m'function'[39m,
  length: [33m0[39m,
  name: [32m'spy'[39m,
  toString: [32m'function(...args) {\n'[39m +
    [32m'    let state2 = getInternalState(fn);\n'[39m +
    [32m'    state2.called = !0, state2.callCount++, state2.calls.push(args);\n'[39m +
    [32m'    let next = state2.next.shift();\n'[39m +
    [32m'    if (next) {\n'[39m +
    [32m'      state2.results...'[39m
}
[WebflowDesignerDetection] Prototype methods: [
  [32m'constructor'[39m,
  [32m'__defineGetter__'[39m,
  [32m'__defineSetter__'[39m,
  [32m'hasOwnProperty'[39m,
  [32m'__lookupGetter__'[39m,
  [32m'__lookupSetter__'[39m,
  [32m'isPrototypeOf'[39m,
  [32m'propertyIsEnumerable'[39m,
  [32m'toString'[39m,
  [32m'valueOf'[39m,
  [32m'__proto__'[39m,
  [32m'toLocaleString'[39m
]
[WebflowDesignerAPI] Detected capabilities: {
  canReadPageInfo: [33mtrue[39m,
  canUpdatePageTitle: [33mtrue[39m,
  canUpdatePageMeta: [33mtrue[39m,
  canUpdatePageSlug: [33mtrue[39m,
  canAddCustomCode: [33mfalse[39m,
  canUpdateCMS: [33mtrue[39m,
  canManipulateElements: [33mfalse[39m,
  canSelectElements: [33mfalse[39m,
  hasElementBuilder: [33mfalse[39m,
  availableMethods: [ [32m'getCurrentPage'[39m, [32m'setPageSetting'[39m, [32m'updateCMSItem'[39m ]
}
[WebflowDesignerAPI] Updating page slug using official API
[WebflowDesignerAPI] slug: new-slug

[90mstdout[2m | client/src/lib/webflowDesignerApi.test.ts[2m > [22m[2mWebflowDesignerExtensionAPI[2m > [22m[2mAPI Method Coverage[2m > [22m[2mshould handle updatePageSlug correctly
[22m[39m[WebflowDesignerAPI] Got current page: {
  setSlug: [Function: spy] {
    getMockName: [36m[Function (anonymous)][39m,
    mockName: [36m[Function (anonymous)][39m,
    mockClear: [36m[Function (anonymous)][39m,
    mockReset: [36m[Function (anonymous)][39m,
    mockRestore: [36m[Function (anonymous)][39m,
    getMockImplementation: [36m[Function (anonymous)][39m,
    mockImplementation: [36m[Function (anonymous)][39m,
    mockImplementationOnce: [36m[Function (anonymous)][39m,
    withImplementation: [36m[Function: withImplementation][39m,
    mockReturnThis: [36m[Function (anonymous)][39m,
    mockReturnValue: [36m[Function (anonymous)][39m,
    mockReturnValueOnce: [36m[Function (anonymous)][39m,
    mockResolvedValue: [36m[Function (anonymous)][39m,
    mockResolvedValueOnce: [36m[Function (anonymous)][39m,
    mockRejectedValue: [36m[Function (anonymous)][39m,
    mockRejectedValueOnce: [36m[Function (anonymous)][39m,
    [[32mSymbol(nodejs.dispose)[39m]: [36m[Function (anonymous)][39m
  }
}

[90mstdout[2m | client/src/lib/webflowDesignerApi.test.ts[2m > [22m[2mWebflowDesignerExtensionAPI[2m > [22m[2mAPI Method Coverage[2m > [22m[2mshould handle updatePageSlug correctly
[22m[39m[WebflowDesignerAPI] Successfully updated page slug

 [32m✓[39m client/src/lib/webflowDesignerApi.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 29[2mms[22m[39m
[90mstderr[2m | workers/modules/aiRecommendations.test.ts[2m > [22m[2maiRecommendations[2m > [22m[2mgetAIRecommendation[2m > [22m[2mshould throw error when OpenAI API key is not configured
[22m[39m[AI Recommendations] Error generating AI recommendation: Error: OpenAI API key not configured
    at Module.getAIRecommendation [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\modules\aiRecommendations.ts:32:13[90m)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\modules\aiRecommendations.test.ts:71:9
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

 [32m✓[39m client/src/services/aiRecommendations.simple.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 19[2mms[22m[39m
[90mstderr[2m | client/src/lib/contentIntelligence.test.ts[2m > [22m[2mContentIntelligence[2m > [22m[2mError Handling[2m > [22m[2mshould handle AI service failures gracefully
[22m[39mAI recommendations failed, falling back to rules only: Error: AI service unavailable
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\contentIntelligence.test.ts:644:51
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstderr[2m | workers/modules/aiRecommendations.test.ts[2m > [22m[2maiRecommendations[2m > [22m[2mgetAIRecommendation[2m > [22m[2mshould retry on OpenAI API failures with exponential backoff
[22m[39m[AI Recommendations] Retry 1/2 after 2000ms delay

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould pass elementIndex to updateH2Heading when applying H2 changes
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstderr[2m | workers/modules/aiRecommendations.test.ts[2m > [22m[2maiRecommendations[2m > [22m[2mgetAIRecommendation[2m > [22m[2mshould retry on OpenAI API failures with exponential backoff
[22m[39m[AI Recommendations] Retry 2/2 after 4000ms delay

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould pass elementIndex to updateH2Heading when applying H2 changes
[22m[39m[WebflowInsertion] Applying request: {
  type: [32m'h2_heading'[39m,
  pageId: [32m'test-page-123'[39m,
  value: [32m'Updated H2 Content'[39m
}

[90mstderr[2m | workers/modules/aiRecommendations.test.ts[2m > [22m[2maiRecommendations[2m > [22m[2mgetAIRecommendation[2m > [22m[2mshould throw error after max retries exceeded
[22m[39m[AI Recommendations] Retry 1/2 after 2000ms delay

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould pass elementIndex to updateH2Heading when applying H2 changes
[22m[39m[WebflowInsertion] Using Designer API to update H2 heading

[90mstderr[2m | workers/modules/aiRecommendations.test.ts[2m > [22m[2maiRecommendations[2m > [22m[2mgetAIRecommendation[2m > [22m[2mshould throw error after max retries exceeded
[22m[39m[AI Recommendations] Retry 2/2 after 4000ms delay

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould pass elementIndex to updateH2Heading when applying H2 changes
[22m[39m[WebflowInsertion] Apply result: {
  success: [33mtrue[39m,
  data: {
    type: [32m'h2_heading'[39m,
    pageId: [32m'test-page-123'[39m,
    originalValue: [1mnull[22m,
    newValue: [32m'Updated H2 Content'[39m,
    timestamp: [32m'2025-10-19T22:36:21.213Z'[39m
  }
}

[90mstderr[2m | workers/modules/aiRecommendations.test.ts[2m > [22m[2maiRecommendations[2m > [22m[2mgetAIRecommendation[2m > [22m[2mshould throw error after max retries exceeded
[22m[39m[AI Recommendations] Error generating AI recommendation: Error: Persistent API error
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\modules\aiRecommendations.test.ts:294:25
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstderr[2m | workers/modules/aiRecommendations.test.ts[2m > [22m[2maiRecommendations[2m > [22m[2mgetAIRecommendation[2m > [22m[2mshould provide localized error messages for non-English languages
[22m[39m[AI Recommendations] Retry 1/2 after 2000ms delay

[90mstderr[2m | workers/modules/aiRecommendations.test.ts[2m > [22m[2maiRecommendations[2m > [22m[2mgetAIRecommendation[2m > [22m[2mshould provide localized error messages for non-English languages
[22m[39m[AI Recommendations] Retry 2/2 after 4000ms delay

[90mstderr[2m | workers/modules/aiRecommendations.test.ts[2m > [22m[2maiRecommendations[2m > [22m[2mgetAIRecommendation[2m > [22m[2mshould provide localized error messages for non-English languages
[22m[39m[AI Recommendations] Error generating AI recommendation: Error: API error
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\modules\aiRecommendations.test.ts:324:25
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstderr[2m | workers/modules/aiRecommendations.test.ts[2m > [22m[2maiRecommendations[2m > [22m[2mgetAIRecommendation[2m > [22m[2mshould handle empty AI response
[22m[39m[AI Recommendations] Error generating AI recommendation: Error: No recommendation received from OpenAI
    at Module.getAIRecommendation [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\modules\aiRecommendations.ts:121:13[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\modules\aiRecommendations.test.ts:354:7
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould default to index 0 when no elementIndex is provided
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould default to index 0 when no elementIndex is provided
[22m[39m[WebflowInsertion] Applying request: {
  type: [32m'h2_heading'[39m,
  pageId: [32m'test-page-123'[39m,
  value: [32m'Updated H2 Content'[39m
}

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould default to index 0 when no elementIndex is provided
[22m[39m[WebflowInsertion] Using Designer API to update H2 heading

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould default to index 0 when no elementIndex is provided
[22m[39m[WebflowInsertion] Apply result: {
  success: [33mtrue[39m,
  data: {
    type: [32m'h2_heading'[39m,
    pageId: [32m'test-page-123'[39m,
    originalValue: [1mnull[22m,
    newValue: [32m'Updated H2 Content'[39m,
    timestamp: [32m'2025-10-19T22:36:21.218Z'[39m
  }
}

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould handle different H2 indices correctly
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould handle different H2 indices correctly
[22m[39m[WebflowInsertion] Applying request: {
  type: [32m'h2_heading'[39m,
  pageId: [32m'test-page-123'[39m,
  value: [32m'Content for first H2'[39m
}

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould handle different H2 indices correctly
[22m[39m[WebflowInsertion] Using Designer API to update H2 heading

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould handle different H2 indices correctly
[22m[39m[WebflowInsertion] Apply result: {
  success: [33mtrue[39m,
  data: {
    type: [32m'h2_heading'[39m,
    pageId: [32m'test-page-123'[39m,
    originalValue: [1mnull[22m,
    newValue: [32m'Content for first H2'[39m,
    timestamp: [32m'2025-10-19T22:36:21.220Z'[39m
  }
}

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould handle different H2 indices correctly
[22m[39m[WebflowInsertion] Applying request: {
  type: [32m'h2_heading'[39m,
  pageId: [32m'test-page-123'[39m,
  value: [32m'Content for second H2'[39m
}

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould handle different H2 indices correctly
[22m[39m[WebflowInsertion] Using Designer API to update H2 heading

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould handle different H2 indices correctly
[22m[39m[WebflowInsertion] Apply result: {
  success: [33mtrue[39m,
  data: {
    type: [32m'h2_heading'[39m,
    pageId: [32m'test-page-123'[39m,
    originalValue: [1mnull[22m,
    newValue: [32m'Content for second H2'[39m,
    timestamp: [32m'2025-10-19T22:36:21.220Z'[39m
  }
}

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould handle different H2 indices correctly
[22m[39m[WebflowInsertion] Applying request: {
  type: [32m'h2_heading'[39m,
  pageId: [32m'test-page-123'[39m,
  value: [32m'Content for fourth H2'[39m
}

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould handle different H2 indices correctly
[22m[39m[WebflowInsertion] Using Designer API to update H2 heading

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould handle different H2 indices correctly
[22m[39m[WebflowInsertion] Apply result: {
  success: [33mtrue[39m,
  data: {
    type: [32m'h2_heading'[39m,
    pageId: [32m'test-page-123'[39m,
    originalValue: [1mnull[22m,
    newValue: [32m'Content for fourth H2'[39m,
    timestamp: [32m'2025-10-19T22:36:21.221Z'[39m
  }
}

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould handle invalid elementIndex gracefully
[22m[39m[WebflowInsertion] No Designer context, using Data API for modifications

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould handle invalid elementIndex gracefully
[22m[39m[WebflowInsertion] Applying request: {
  type: [32m'h2_heading'[39m,
  pageId: [32m'test-page-123'[39m,
  value: [32m'Updated H2 Content'[39m
}

[90mstderr[2m | client/src/utils/clipboard.test.tsx[2m > [22m[2mclipboard utilities[2m > [22m[2mcopyToClipboard[2m > [22m[2mfalls back to execCommand when clipboard API fails
[22m[39mModern clipboard API failed: Error: Clipboard API failed
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\utils\clipboard.test.tsx:40:49
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstdout[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould handle invalid elementIndex gracefully
[22m[39m[WebflowInsertion] Using Designer API to update H2 heading

[90mstderr[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould handle invalid elementIndex gracefully
[22m[39m[WebflowInsertion] Failed to update H2 heading: Error: H2 element at index 999 not found
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.h2Apply.test.ts:150:43
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstderr[2m | client/src/lib/webflowInsertion.h2Apply.test.ts[2m > [22m[2mWebflowInsertion - H2 Apply Index Targeting[2m > [22m[2mshould handle invalid elementIndex gracefully
[22m[39m[WebflowInsertion] Apply error: Error: H2 element at index 999 not found
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\lib\webflowInsertion.h2Apply.test.ts:150:43
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstderr[2m | client/src/utils/clipboard.test.tsx[2m > [22m[2mclipboard utilities[2m > [22m[2mcopyToClipboard[2m > [22m[2mreturns false when both methods fail
[22m[39mModern clipboard API failed: Error: Clipboard API failed
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\utils\clipboard.test.tsx:49:49
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

 [32m✓[39m client/src/lib/bundle-validation.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32m✓[39m client/src/utils/keywordStorage.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32m✓[39m client/src/lib/contentIntelligence.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 44[2mms[22m[39m
 [32m✓[39m client/src/utils/clipboard.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 30[2mms[22m[39m
 [32m✓[39m workers/modules/aiRecommendations.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 50[2mms[22m[39m
 [32m✓[39m client/src/lib/webflowInsertion.h2Apply.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 23[2mms[22m[39m
[90mstderr[2m | client/src/utils/languageStorage.test.ts[2m > [22m[2mLanguage Storage with Site Detection[2m > [22m[2mloadLanguageForSite[2m > [22m[2mshould handle localStorage errors gracefully
[22m[39mFailed to load language preference from localStorage: Error: localStorage error
    at Object.<anonymous> [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\utils\languageStorage.test.ts:116:15[90m)[39m
    at Object.mockCall [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+spy@3.2.4/node_modules/[4m@vitest[24m/spy/dist/index.js:96:15[90m)[39m
    at Object.getItem [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/tinyspy@4.0.3/node_modules/[4mtinyspy[24m/dist/index.js:47:103[90m)[39m
    at Module.loadLanguageForSite [90m(C:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\utils\languageStorage.ts:46:33[90m)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mclient\src\utils\languageStorage.test.ts:119:22
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m

[90mstderr[2m | client/src/utils/languageStorage.test.ts[2m > [22m[2mLanguage Storage with Site Detection[2m > [22m[2msaveLanguageForSite[2m > [22m[2mshould handle unsupported language codes
[22m[39mUnsupported language code: xyz. Using default language.

[90mstdout[2m | workers/modules/seoAnalysis.h2Integration.test.ts[2m > [22m[2mSEO Analysis - H2 Heading Integration with Designer API[2m > [22m[2mshould use H2 content from Webflow Designer API when available
[22m[39m[Backend H2 Debug] H2 text: Our Services with test keyword Why Choose Us
[Backend H2 Debug] Keyphrase: test keyword
[Backend H2 Debug] Match result: {
  found: [33mtrue[39m,
  matchedKeyword: [32m'test keyword'[39m,
  keywordResults: [ { keyword: [32m'test keyword'[39m, passed: [33mtrue[39m, isPrimary: [33mtrue[39m } ]
}

 [32m✓[39m client/src/services/rollbackService.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 38[2mms[22m[39m
[90mstdout[2m | workers/modules/seoAnalysis.h2Integration.test.ts[2m > [22m[2mSEO Analysis - H2 Heading Integration with Designer API[2m > [22m[2mshould handle when H2 content from Designer API does not contain keyphrase
[22m[39m[Backend H2 Debug] H2 text: Our Services Contact Information
[Backend H2 Debug] Keyphrase: missing keyword
[Backend H2 Debug] Match result: {
  found: [33mfalse[39m,
  matchedKeyword: [90mundefined[39m,
  keywordResults: [ { keyword: [32m'missing keyword'[39m, passed: [33mfalse[39m, isPrimary: [33mtrue[39m } ]
}

 [32m✓[39m client/src/utils/appliedRecommendationsStorage.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 24[2mms[22m[39m
[90mstdout[2m | workers/modules/seoAnalysis.h2Integration.test.ts[2m > [22m[2mSEO Analysis - H2 Heading Integration with Designer API[2m > [22m[2mshould count H2s correctly when using Designer API data
[22m[39m[Backend H2 Debug] H2 text: Our Services Additional Services Contact Us
[Backend H2 Debug] Keyphrase: services
[Backend H2 Debug] Match result: {
  found: [33mtrue[39m,
  matchedKeyword: [32m'services'[39m,
  keywordResults: [ { keyword: [32m'services'[39m, passed: [33mtrue[39m, isPrimary: [33mtrue[39m } ]
}

 [32m✓[39m client/src/services/impactAnalysis.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 16[2mms[22m[39m
[90mstdout[2m | workers/modules/seoAnalysis.h2Integration.test.ts[2m > [22m[2mSEO Analysis - H2 Heading Integration with Designer API[2m > [22m[2mshould fall back to scraped data when Designer API H2 data is not available
[22m[39m[Backend H2 Debug] H2 text: Fallback H2 with fallback test keyword Another H2
[Backend H2 Debug] Keyphrase: fallback test
[Backend H2 Debug] Match result: {
  found: [33mtrue[39m,
  matchedKeyword: [32m'fallback test'[39m,
  keywordResults: [ { keyword: [32m'fallback test'[39m, passed: [33mtrue[39m, isPrimary: [33mtrue[39m } ]
}

[90mstdout[2m | workers/modules/seoAnalysis.h2Integration.test.ts[2m > [22m[2mSEO Analysis - H2 Heading Integration with Designer API[2m > [22m[2mshould handle empty H2 elements array from Designer API
[22m[39m[Backend H2 Debug] H2 text: 
[Backend H2 Debug] Keyphrase: test
[Backend H2 Debug] Match result: { found: [33mfalse[39m, keywordResults: [] }

[90mstdout[2m | workers/modules/seoAnalysis.h2Integration.test.ts[2m > [22m[2mSEO Analysis - H2 Heading Integration with Designer API[2m > [22m[2mshould handle H2s with empty text content from Designer API
[22m[39m[Backend H2 Debug] H2 text:  Valid H2 with test    
[Backend H2 Debug] Keyphrase: test
[Backend H2 Debug] Match result: {
  found: [33mtrue[39m,
  matchedKeyword: [32m'test'[39m,
  keywordResults: [ { keyword: [32m'test'[39m, passed: [33mtrue[39m, isPrimary: [33mtrue[39m } ]
}

[90mstdout[2m | workers/modules/seoAnalysis.h2Integration.test.ts[2m > [22m[2mSEO Analysis - H2 Heading Integration with Designer API[2m > [22m[2mshould work with secondary keywords when using Designer API H2 data
[22m[39m[Backend H2 Debug] H2 text: Our Professional Services Business Solutions
[Backend H2 Debug] Keyphrase: primary
[Backend H2 Debug] Match result: {
  found: [33mtrue[39m,
  matchedKeyword: [32m'services'[39m,
  keywordResults: [
    { keyword: [32m'primary'[39m, passed: [33mfalse[39m, isPrimary: [33mtrue[39m },
    { keyword: [32m'services'[39m, passed: [33mtrue[39m, isPrimary: [33mfalse[39m },
    { keyword: [32m'solutions'[39m, passed: [33mtrue[39m, isPrimary: [33mfalse[39m }
  ]
}

 [32m✓[39m client/src/utils/languageStorage.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32m✓[39m workers/modules/seoAnalysis.h2Integration.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32m✓[39m client/src/utils/insertionHelpers.content.test.ts [2m([22m[2m19 tests[22m[2m)[22m[32m 16[2mms[22m[39m
[90mstdout[2m | workers/index.test.ts[2m > [22m[2mWorkers API Index[2m > [22m[2mPOST /api/analyze[2m > [22m[2mshould analyze SEO with valid request
[22m[39m[DEBUG] Analyze endpoint called

[90mstdout[2m | workers/index.test.ts[2m > [22m[2mWorkers API Index[2m > [22m[2mPOST /api/analyze[2m > [22m[2mshould analyze SEO with valid request
[22m[39m[DEBUG] Body parsed: object
[DEBUG] Validation passed
[DEBUG] Destructured variables, about to scrape

[90mstdout[2m | workers/index.test.ts[2m > [22m[2mWorkers API Index[2m > [22m[2mPOST /api/analyze[2m > [22m[2mshould analyze SEO with valid request
[22m[39m[DEBUG] Scraping completed
[DEBUG] About to call analyzeSEOElements

[90mstdout[2m | workers/index.test.ts[2m > [22m[2mWorkers API Index[2m > [22m[2mPOST /api/analyze[2m > [22m[2mshould analyze SEO with valid request
[22m[39m[DEBUG] Analysis completed

[90mstdout[2m | workers/index.test.ts[2m > [22m[2mWorkers API Index[2m > [22m[2mPOST /api/analyze[2m > [22m[2mshould return 400 for invalid request body
[22m[39m[DEBUG] Analyze endpoint called

[90mstdout[2m | workers/index.test.ts[2m > [22m[2mWorkers API Index[2m > [22m[2mPOST /api/analyze[2m > [22m[2mshould return 400 for invalid request body
[22m[39m[DEBUG] Body parsed: object
[DEBUG] Validation failed

[90mstdout[2m | workers/index.test.ts[2m > [22m[2mWorkers API Index[2m > [22m[2mPOST /api/analyze[2m > [22m[2mshould handle scraping errors gracefully
[22m[39m[DEBUG] Analyze endpoint called

[90mstdout[2m | workers/index.test.ts[2m > [22m[2mWorkers API Index[2m > [22m[2mPOST /api/analyze[2m > [22m[2mshould handle scraping errors gracefully
[22m[39m[DEBUG] Body parsed: object
[DEBUG] Validation passed
[DEBUG] Destructured variables, about to scrape

[90mstderr[2m | workers/index.test.ts[2m > [22m[2mWorkers API Index[2m > [22m[2mPOST /api/analyze[2m > [22m[2mshould handle scraping errors gracefully
[22m[39m[SEO Analyzer] Error in /api/analyze route: Error: Failed to scrape website
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\index.test.ts:162:29
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstdout[2m | workers/index.test.ts[2m > [22m[2mWorkers API Index[2m > [22m[2mPOST /api/analyze[2m > [22m[2mshould handle analysis errors gracefully
[22m[39m[DEBUG] Analyze endpoint called

[90mstdout[2m | workers/index.test.ts[2m > [22m[2mWorkers API Index[2m > [22m[2mPOST /api/analyze[2m > [22m[2mshould handle analysis errors gracefully
[22m[39m[DEBUG] Body parsed: object
[DEBUG] Validation passed
[DEBUG] Destructured variables, about to scrape

[90mstdout[2m | workers/index.test.ts[2m > [22m[2mWorkers API Index[2m > [22m[2mPOST /api/analyze[2m > [22m[2mshould handle analysis errors gracefully
[22m[39m[DEBUG] Scraping completed
[DEBUG] About to call analyzeSEOElements

[90mstderr[2m | workers/index.test.ts[2m > [22m[2mWorkers API Index[2m > [22m[2mPOST /api/analyze[2m > [22m[2mshould handle analysis errors gracefully
[22m[39m[SEO Analyzer] Error in /api/analyze route: Error: Analysis failed
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\index.test.ts:184:29
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:155:11
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:26
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1863:10[90m)[39m
    at runTest [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1574:12[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m
    at runSuite [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:1729:8[90m)[39m

[90mstdout[2m | workers/index.test.ts[2m > [22m[2mWorkers API Index[2m > [22m[2mPOST /api/analyze[2m > [22m[2mshould handle JSON parsing errors
[22m[39m[DEBUG] Analyze endpoint called

 [32m✓[39m workers/modules/oauthProxy.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 20[2mms[22m[39m
[90mstderr[2m | workers/index.test.ts[2m > [22m[2mWorkers API Index[2m > [22m[2mPOST /api/analyze[2m > [22m[2mshould handle JSON parsing errors
[22m[39m[SEO Analyzer] Error in /api/analyze route: SyntaxError: Unexpected token 'i', "invalid json" is not valid JSON
    at JSON.parse (<anonymous>)
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/hono@4.9.8/node_modules/[4mhono[24m/dist/request.js:78:57
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\index.ts:30:18
    at dispatch [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/hono@4.9.8/node_modules/[4mhono[24m/dist/compose.js:22:17[90m)[39m
    at cors2 [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/hono@4.9.8/node_modules/[4mhono[24m/dist/middleware/cors/index.js:84:5[90m)[39m
    at dispatch [90m(file:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/hono@4.9.8/node_modules/[4mhono[24m/dist/compose.js:22:17[90m)[39m
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/hono@4.9.8/node_modules/[4mhono[24m/dist/hono-base.js:201:25
    at [90mC:\Users\Paul Mulligan\PMDS\Projects\AI-SEO-Copilot-for-Webflow\[39mworkers\index.test.ts:222:24
    at [90mfile:///C:/Users/Paul%20Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/[39mnode_modules/[4m.pnpm[24m/@vitest+runner@3.2.4/node_modules/[4m@vitest[24m/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | workers/index.test.ts[2m > [22m[2mWorkers API Index[2m > [22m[2mPOST /api/analyze[2m > [22m[2mshould pass environment variables to analyzeSEOElements
[22m[39m[DEBUG] Analyze endpoint called

[90mstdout[2m | workers/index.test.ts[2m > [22m[2mWorkers API Index[2m > [22m[2mPOST /api/analyze[2m > [22m[2mshould pass environment variables to analyzeSEOElements
[22m[39m[DEBUG] Body parsed: object
[DEBUG] Validation passed
[DEBUG] Destructured variables, about to scrape

[90mstdout[2m | workers/index.test.ts[2m > [22m[2mWorkers API Index[2m > [22m[2mPOST /api/analyze[2m > [22m[2mshould pass environment variables to analyzeSEOElements
[22m[39m[DEBUG] Scraping completed
[DEBUG] About to call analyzeSEOElements

[90mstdout[2m | workers/index.test.ts[2m > [22m[2mWorkers API Index[2m > [22m[2mPOST /api/analyze[2m > [22m[2mshould pass environment variables to analyzeSEOElements
[22m[39m[DEBUG] Analysis completed

 [32m✓[39m client/src/lib/types.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32m✓[39m workers/advancedOptions.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32m✓[39m client/src/lib/queryClient.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32m✓[39m workers/modules/validation.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32m✓[39m workers/index.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 41[2mms[22m[39m
 [32m✓[39m client/src/utils/insertionHelpers.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32m✓[39m client/src/lib/get-page-slug.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32m✓[39m client/src/lib/docs-links.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m✓[39m workers/middleware/cors.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 7[2mms[22m[39m

[31m⎯⎯⎯⎯⎯⎯⎯[39m[1m[41m Failed Tests 1 [49m[22m[31m⎯⎯⎯⎯⎯⎯⎯[39m

[41m[1m FAIL [22m[49m client/src/pages/Home.test.tsx[2m > [22mHome Component - Additional Coverage[2m > [22mError Handling Scenarios[2m > [22mhandles webflow API not available scenario
[31m[1mAssertionError[22m[39m: expected "warn" to be called with arguments: [ 'Home: Webflow API not available' ][90m

Received: 

[1m  1st warn call:

[22m[2m  [[22m
[32m-   "Home: Webflow API not available",[90m
[31m+   "Home:",[90m
[31m+   "Webflow API not available",[90m
[2m  ][22m
[39m[90m

Number of calls: [1m1[22m
[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"min-h-screen bg-background p-4 md:p-6 flex flex-col"[39m
        [33mstyle[39m=[32m"color: #FFFFFF"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mx-auto w-full max-w-3xl space-y-6 flex-grow"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"w-full"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"rounded-lg border bg-background2 text-card-foreground shadow-sm w-full"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex flex-col space-y-1.5 p-6"[39m
              [36m>[39m
                [36m<h3[39m
                  [33mclass[39m=[32m"text-2xl font-semibold leading-none tracking-tight text-center"[39m
                [36m>[39m
                  [0mSEO Analysis Tool[0m
                [36m</h3>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"p-6 pt-0"[39m
              [36m>[39m
                [36m<form[39m
                  [33mclass[39m=[32m"space-y-5 w-full"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"space-y-2 w-full"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex justify-between items-center mb-1"[39m
                    [36m>[39m
                      [36m<label[39m
                        [33mclass[39m=[32m"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 mb-0"[39m
                        [33mfor[39m=[32m"«r14»-form-item"[39m
                      [36m>[39m
                        [0mTarget keyphrase[0m
                      [36m</label>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"text-xs font-medium"[39m
                        [33mstyle[39m=[32m"color: var(--redText)"[39m
                      [36m>[39m
                        [0mNo keyword saved[0m
                      [36m</span>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33maria-describedby[39m=[32m"«r14»-form-item-description"[39m
                      [33maria-invalid[39m=[32m"false"[39m
                      [33mclass[39m=[32m"mt-2 w-full mt-2"[39m
                      [33mid[39m=[32m"«r14»-form-item"[39m
                    [36m>[39m
                      [36m<input[39m
                        [33mclass[39m=[32m"flex h-10 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 w-full"[39m
                        [33mname[39m=[32m"keyphrase"[39m
                        [33mplaceholder[39m=[32m"Enter your target keyphrase"[39m
                        [33mvalue[39m=[32m""[39m
                      [36m/>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"border-t pt-4 mt-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex items-center justify-between mb-4"[39m
                    [36m>[39m
                      [36m<div>[39m
                        [36m<h3[39m
                          [33mclass[39m=[32m"text-lg font-semibold"[39m
                        [36m>[39m
                          [0mAdvanced Analysis[0m
                        [36m</h3>[39m
                        [36m<p[39m
                          [33mclass[39m=[32m"text-sm text-muted-foreground"[39m
                        [36m>[39m
                          [0mAdd secondary keywords and specify page type for more targeted SEO analysis[0m
                        [36m</p>[39m
                      [36m</div>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"flex items-center space-x-2"[39m
                      [36m>[39m
                        [36m<button[39m
                          [33maria-checked[39m=[32m"false"[39m
                          [33mclass[39m=[32m"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input"[39m
                          [33mdata-state[39m=[32m"unchecked"[39m
                          [33mrole[39m=[32m"switch"[39m
                          [33mtype[39m=[32m"button"[39m
                          [33mvalue[39m=[32m"on"[39m
                        [36m>[39m
                          [36m<span[39m
                            [33mclass[39m=[32m"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"[39m
                            [33mdata-state[39m=[32m"unchecked"[39m
                          [36m/>[39m
                        [36m</button>[39m
                        [36m<input[39m
                          [33maria-hidden[39m=[32m"true"[39m
                          [33mstyle[39m=[32m"transform: translateX(-100%); width: 200px; height: 100px"[39m
                          [33mtabindex[39m=[32m"-1"[39m
                          [33mtype[39m=[32m"checkbox"[39m
                          [33mvalue[39m=[32m"on"[39m
                        [36m/>[39m
                        [36m<span[39m
                          [33mclass[39m=[32m"text-sm"[39m
                        [36m>[39m
                          [0mOff[0m
                        [36m</span>[39m
                      [36m</div>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"w-full pt-2"[39m
                  [36m>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:...
[36m [2m❯[22m __vi_import_1__.waitFor.timeout client/src/pages/Home.test.tsx:[2m457:28[22m[39m
    [90m455| [39m      // Should log warning about webflow not being available with sho…
    [90m456| [39m      [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m457| [39m        expect(consoleSpy).toHaveBeenCalledWith("Home: Webflow API not…
    [90m   | [39m                           [31m^[39m
    [90m458| [39m      }[33m,[39m { timeout[33m:[39m [34m100[39m[33m,[39m interval[33m:[39m [34m10[39m })[33m;[39m
    [90m459| [39m      
[90m [2m❯[22m runWithExpensiveErrorDiagnosticsDisabled node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/config.js:[2m47:12[22m[39m
[90m [2m❯[22m checkCallback node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m124:77[22m[39m
[90m [2m❯[22m Timeout.checkRealTimersCallback node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m118:16[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/1]⎯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m82 passed[39m[22m[90m (83)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m1354 passed[39m[22m[90m (1355)[39m
[2m   Start at [22m 18:36:11
[2m   Duration [22m 10.99s[2m (transform 8.50s, setup 79.62s, collect 21.59s, tests 33.72s, environment 97.16s, prepare 26.33s)[22m

[1m[7m[35m HTML [39m[27m[22m [35mReport is generated[39m
[2m       You can run [22m[1mnpx vite preview --outDir test-results[22m[2m to see the test results.[22m
JUNIT report written to C:/Users/Paul Mulligan/PMDS/Projects/AI-SEO-Copilot-for-Webflow/test-results/junit.xml
 ELIFECYCLE  Test failed. See above for more details.
